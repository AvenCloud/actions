{"version":3,"sources":["/webpack/bootstrap","../src/utils/fs.ts","../src/utils/io.ts","../src/utils/getDomains.ts","../external \"os\"","../external \"child_process\"","../src/utils/getRuntimeHost.ts","../external \"https\"","../src/utils/spawn.ts","../src/actions/prepare/prepareRemoteServer.ts","../src/actions/deploy/main.ts","../node_modules/@actions/core/lib/command.js","../src/utils/request.ts","../node_modules/@actions/core/lib/core.js","../src/utils/getServiceName.ts","../node_modules/github-username-regex/index.js","../external \"path\"","../external \"util\"","../external \"fs\"","../src/utils/isGitHubAction.ts","../src/utils/reportError.ts","/webpack/runtime/node module decorator"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","threw","modules","call","ab","__dirname","startup","runtime","__awaiter","this","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","ensureLinkIs","ensureFilesAre","ensureFileIs","ensureFileContains","exists","mkdir","copyFile","chmod","chown","unlink","fs_1","io_1","args","path","debug","promises","src","dest","dir","options","mode","assign","recursive","filePath","access","filename","contents","current","readFile","catch","toString","includes","length","writeFile","list","all","map","target","readlink","code","undefined","symlink","verbosityLevel","input","core_1","isGitHubAction_1","util_1","name","isGitHubAction","Error","getInput","info","formatWithOptions","colors","process","env","DEBUG","console","log","raw","level","parseInt","isFinite","RangeError","getDomains","domains","split","filter","s","require","getRuntimeHost","getDomains_1","runtimeHost","exec","spawn","child_process_1","defaultShell","command","first","defOpts","stdio","opts","unshift","shell","proc","ret","on","exitCode","child","execP","promisify","__importDefault","mod","__esModule","default","prepareRemoteServer","spawn_1","getServiceName_1","request_1","github_username_regex_1","getAuthorizedDeployKey","keyFile","HOME","stdout","trim","getAuthorizedDeployKeyNew","getConfig","authorizedKeys","newKey","push","extra","k","match","request","keys","service","getServiceName","enable","description","startServerCommand","extraConfigs","webRootPath","runtimeServerTimezone","aptDependencies","runtimeAptDependencies","temp","kibanaHost","elastic","hosts","username","password","logstashHosts","journalbeat","verboseSSHArg","verboseSpawnArg","verbosity","prepare","stdin","end","JSON","stringify","main","prepareRemoteServer_1","reportError_1","getRuntimeHost_1","setupShhConfig","files","deployKey","deployKeyNew","mainKey","identityFile","identityFileNew","runtimeHostPort","hostKeys","config","copySources","copyServiceConfigs","configsRaw","configs","restartApplication","serviceName","parent","reportError","__importStar","hasOwnProperty","os","issueCommand","properties","message","cmd","Command","write","EOL","issue","CMD_STRING","[object Object]","cmdStr","key","val","escapeProperty","escapeData","toCommandValue","String","replace","https_1","httpsUrl","response","req","get","res","chunk","command_1","ExitCode","exportVariable","convertedVal","setSecret","secret","addPath","inputPath","delimiter","toUpperCase","required","setOutput","setCommandEcho","enabled","setFailed","Failure","error","isDebug","warning","startGroup","endGroup","group","fn","saveState","getState","module$1","GITHUB_ACTIONS","argv","nmd","paths","children","enumerable"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t__webpack_require__.ab = __dirname + \"/\";\n\n \t// the startup function\n \tfunction startup() {\n \t\t// Load entry module and return exports\n \t\treturn __webpack_require__(403);\n \t};\n \t// initialize runtime\n \truntime(__webpack_require__);\n\n \t// run startup\n \treturn startup();\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ensureLinkIs = exports.ensureFilesAre = exports.ensureFileIs = exports.ensureFileContains = exports.exists = exports.mkdir = exports.copyFile = exports.chmod = exports.chown = exports.unlink = void 0;\nconst fs_1 = require(\"fs\");\nconst io_1 = require(\"./io\");\nfunction unlink(...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [path] = args;\n        io_1.debug('unlink:', path);\n        yield fs_1.promises.unlink(...args);\n    });\n}\nexports.unlink = unlink;\nfunction chown(...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [path, value] = args;\n        io_1.debug('chown:', path, 'to', value);\n        yield fs_1.promises.chown(...args);\n    });\n}\nexports.chown = chown;\nfunction chmod(...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [path, value] = args;\n        io_1.debug('chmod:', path, 'to', value);\n        yield fs_1.promises.chmod(...args);\n    });\n}\nexports.chmod = chmod;\nfunction copyFile(...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [src, dest] = args;\n        io_1.debug('copyFile:', src, 'to', dest);\n        yield fs_1.promises.copyFile(...args);\n    });\n}\nexports.copyFile = copyFile;\nfunction mkdir(dir, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (typeof options !== 'object') {\n            options = { mode: options };\n        }\n        options = Object.assign({ recursive: true }, options);\n        io_1.debug('mkdir:', dir);\n        yield fs_1.promises.mkdir(dir, options);\n    });\n}\nexports.mkdir = mkdir;\nfunction exists(filePath) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return fs_1.promises.access(filePath).then(() => true, () => false);\n    });\n}\nexports.exists = exists;\nfunction ensureFileContains(filename, contents) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const current = (yield fs_1.promises.readFile(filename).catch(() => '')).toString();\n        if (current.includes(contents))\n            return false;\n        io_1.debug('Appending to file:', filename, 'bytes:', contents.length);\n        yield fs_1.promises.writeFile(filename, current + contents);\n        return true;\n    });\n}\nexports.ensureFileContains = ensureFileContains;\nfunction ensureFileIs(filename, contents, mode) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // We could just skip the read part of this but this preserves modification times\n        const current = (yield fs_1.promises.readFile(filename).catch(() => '')).toString();\n        if (current === contents)\n            return false;\n        io_1.debug('Writing to file:', filename, 'bytes:', contents.length);\n        yield fs_1.promises.writeFile(filename, contents, { mode });\n        return true;\n    });\n}\nexports.ensureFileIs = ensureFileIs;\nfunction ensureFilesAre(list) {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield Promise.all(list.map(({ filename, contents }) => ensureFileIs(filename, contents)));\n    });\n}\nexports.ensureFilesAre = ensureFilesAre;\nfunction ensureLinkIs(target, path) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const current = yield fs_1.promises.readlink(path).catch(e => {\n            if (e.code === 'ENOENT')\n                return undefined;\n            throw e;\n        });\n        if (target === current)\n            return false;\n        if (current !== undefined)\n            yield unlink(path);\n        io_1.debug('Updating symlink', path, 'to point to', target);\n        yield fs_1.promises.symlink(target, path);\n        return true;\n    });\n}\nexports.ensureLinkIs = ensureLinkIs;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.verbosityLevel = exports.debug = exports.input = void 0;\nconst core_1 = require(\"@actions/core\");\nconst isGitHubAction_1 = require(\"./isGitHubAction\");\nconst util_1 = require(\"util\");\nfunction input(name) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!isGitHubAction_1.isGitHubAction) {\n            throw new Error('Not made to work in other environments yet!');\n            // TODO: iff not otherwise read from local config, cli arguments, or prompt the dev?\n        }\n        return core_1.getInput(name);\n    });\n}\nexports.input = input;\nfunction debug(...info) {\n    if (isGitHubAction_1.isGitHubAction) {\n        core_1.debug(util_1.formatWithOptions({ colors: true }, ...info));\n        return;\n    }\n    if (process.env.DEBUG === undefined)\n        return;\n    console.log(...info);\n}\nexports.debug = debug;\nfunction verbosityLevel() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const raw = yield input('verbosity');\n        const level = parseInt(raw);\n        if (!isFinite(level))\n            throw new Error(`Invalid verbosity: ${raw}.`);\n        if (level < 0)\n            throw new RangeError(`Invalid verbosity: ${level}. 0 is minimum.`);\n        if (level > 3)\n            throw new RangeError(`Invalid verbosity: ${level}. 3 is maximum.`);\n        return level;\n    });\n}\nexports.verbosityLevel = verbosityLevel;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDomains = void 0;\nconst io_1 = require(\"./io\");\nfunction getDomains() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const raw = yield io_1.input('domains');\n        if (!raw)\n            return;\n        const domains = raw.split(/\\s/).filter(s => s);\n        if (!domains.length) {\n            throw new Error('`domains` not defined.');\n        }\n        return domains;\n    });\n}\nexports.getDomains = getDomains;\n","module.exports = require(\"os\");","module.exports = require(\"child_process\");","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRuntimeHost = void 0;\nconst io_1 = require(\"./io\");\nconst getDomains_1 = require(\"./getDomains\");\nfunction getRuntimeHost() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const runtimeHost = yield io_1.input('runtime-host-hostname');\n        if (runtimeHost)\n            return runtimeHost;\n        const domains = yield getDomains_1.getDomains();\n        if (!domains || !domains[0])\n            throw new Error('Domains needed if runtime-host-hostname is unset!');\n        return domains[0];\n    });\n}\nexports.getRuntimeHost = getRuntimeHost;\n","module.exports = require(\"https\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.exec = exports.spawn = void 0;\nconst child_process_1 = require(\"child_process\");\nconst util_1 = require(\"util\");\nconst io_1 = require(\"./io\");\nconst defaultShell = '/bin/bash';\nfunction spawn(command, first, ...args) {\n    const defOpts = { stdio: 'inherit' };\n    let opts;\n    if (typeof first === 'string') {\n        args.unshift(first);\n        opts = defOpts;\n    }\n    else {\n        if (first === true) {\n            opts = Object.assign(Object.assign({}, defOpts), { shell: defaultShell });\n        }\n        else {\n            opts = Object.assign(Object.assign({}, defOpts), first);\n        }\n    }\n    io_1.debug('Spawning', command, args);\n    const proc = child_process_1.spawn(command, args, opts);\n    const ret = new Promise((resolve, reject) => {\n        proc.on('exit', exitCode => {\n            if (exitCode) {\n                const e = new Error(`Exit code: ${exitCode}`);\n                e.exitCode = exitCode;\n                reject(e);\n            }\n            else {\n                resolve();\n            }\n        });\n    });\n    ret.child = proc;\n    return ret;\n}\nexports.spawn = spawn;\nconst execP = util_1.promisify(child_process_1.exec);\n/**\n * Run a command and capture output.\n *\n * Prints nothing.\n *\n * - Shell\n * - Captured & Buffered output\n * - Promised result.\n *\n * @param {string} command - The command to run.\n * @param {true|string} shell - Should we use a shell. Default true.\n * @returns {ChildProcess} The child.\n */\nfunction exec(command, shell = true) {\n    io_1.debug('Exec:', command);\n    if (shell === null) {\n        return execP(command);\n    }\n    if (shell === true)\n        shell = defaultShell;\n    return execP(command, { shell });\n}\nexports.exec = exec;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prepareRemoteServer = void 0;\nconst spawn_1 = require(\"../../utils/spawn\");\nconst io_1 = require(\"../../utils/io\");\nconst getDomains_1 = require(\"../../utils/getDomains\");\nconst getServiceName_1 = require(\"../../utils/getServiceName\");\nconst request_1 = require(\"../../utils/request\");\nconst github_username_regex_1 = __importDefault(require(\"github-username-regex\"));\nconst fs_1 = require(\"../../utils/fs\");\nfunction getAuthorizedDeployKey() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const keyFile = `${process.env.HOME}/.ssh/id_rsa`;\n        return (yield spawn_1.exec(`ssh-keygen -y -f ${keyFile}`)).stdout.trim();\n    });\n}\nfunction getAuthorizedDeployKeyNew() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const keyFile = `${process.env.HOME}/.ssh/id_rsa.2`;\n        if (!(yield fs_1.exists(keyFile)))\n            return;\n        return (yield spawn_1.exec(`ssh-keygen -y -f ${keyFile}`)).stdout.trim();\n    });\n}\nfunction getConfig() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const ret = {};\n        ret.domains = yield getDomains_1.getDomains();\n        ret.authorizedKeys = [yield getAuthorizedDeployKey()];\n        const newKey = yield getAuthorizedDeployKeyNew();\n        if (newKey)\n            ret.authorizedKeys.push(newKey);\n        const extra = (yield io_1.input('extra-keys')).split('\\n').map((k) => __awaiter(this, void 0, void 0, function* () {\n            if (k.match(github_username_regex_1.default))\n                k = `https://github.com/${k}.keys`;\n            if (k.match(/^https:\\/\\//))\n                return (yield request_1.request(k)).split('\\n');\n            return [k];\n        }));\n        for (const keys of yield Promise.all(extra)) {\n            ret.authorizedKeys.push(...keys.filter(s => s));\n        }\n        ret.service = {\n            name: yield getServiceName_1.getServiceName(),\n            enable: (yield io_1.input('disable-service')) !== 'yes',\n            description: yield io_1.input('service-description'),\n            startServerCommand: yield io_1.input('start-server-command'),\n            extraConfigs: yield io_1.input('service-configs'),\n        };\n        ret.webRootPath = yield io_1.input('static-web-root');\n        ret.runtimeServerTimezone = yield io_1.input('runtime-server-timezone');\n        ret.aptDependencies = (yield io_1.input('apt-dependencies'))\n            .split(/\\s/)\n            .filter(s => s);\n        ret.runtimeAptDependencies = (yield io_1.input('runtime-apt-dependencies'))\n            .split(/\\s/)\n            .filter(s => s);\n        const temp = {\n            kibanaHost: yield io_1.input('kibana-host'),\n            elastic: {\n                hosts: (yield io_1.input('elastic-hosts')).split(/\\s/).filter(s => s),\n                username: yield io_1.input('elastic-username'),\n                password: yield io_1.input('elastic-password'),\n            },\n            logstashHosts: (yield io_1.input('logstash-hosts')).split(/\\s/).filter(s => s),\n        };\n        if (temp.kibanaHost ||\n            temp.elastic.hosts.length ||\n            temp.logstashHosts.length) {\n            ret.journalbeat = temp;\n        }\n        // TODO\n        yield io_1.input('verbosity');\n        return ret;\n    });\n}\n/**\n * Connect to a remote server and get it into a state we want by running the prepare script on the remote server.\n *\n * The script is copied to the remote system and then streamed a block of JSON that includes all of the settings from the github action needed to setup the remote system.\n *\n */\nfunction prepareRemoteServer() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const verboseSSHArg = [];\n        const verboseSpawnArg = [];\n        const verbosity = yield io_1.verbosityLevel();\n        if (verbosity > 2)\n            verboseSSHArg.push('-v');\n        if (verbosity > 1)\n            verboseSpawnArg.push('--verbose');\n        // Smoke-test\n        yield spawn_1.spawn('ssh', ...verboseSSHArg, 'runtime-server', 'uptime', '-p');\n        yield spawn_1.spawn('rsync', ...verboseSpawnArg, '--recursive', '--compress', '--links', '--executability', \n        // Build script puts a `remote` folder next to action.yml in dist\n        `${__dirname}/../../prepare/remote/`, \n        // Deploy to home dir\n        'runtime-server:');\n        const prepare = spawn_1.spawn('ssh', { stdio: ['pipe', 'inherit', 'inherit'] }, ...verboseSSHArg, 'runtime-server', 'bash', 'setup.sh', '--gh-actions');\n        if (!prepare.child.stdin)\n            throw new Error('missing stdin???');\n        prepare.child.stdin.end(JSON.stringify(yield getConfig()));\n        yield prepare;\n    });\n}\nexports.prepareRemoteServer = prepareRemoteServer;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.main = void 0;\nconst io_1 = require(\"../../utils/io\");\nconst prepareRemoteServer_1 = require(\"../prepare/prepareRemoteServer\");\nconst reportError_1 = require(\"../../utils/reportError\");\nconst spawn_1 = require(\"../../utils/spawn\");\nconst fs_1 = require(\"../../utils/fs\");\nconst getRuntimeHost_1 = require(\"../../utils/getRuntimeHost\");\nconst getServiceName_1 = require(\"../../utils/getServiceName\");\n/**\n * Setup the action runtime ssh settings that will be used for deploy.\n */\nfunction setupShhConfig() {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield fs_1.mkdir(`${process.env.HOME}/.ssh`);\n        const files = [];\n        const deployKey = yield io_1.input('deploy-key');\n        const deployKeyNew = yield io_1.input('deploy-key-new');\n        const mainKey = deployKey || deployKeyNew;\n        if (!mainKey) {\n            throw new Error('deploy-key required! It is missing or empty.');\n        }\n        const identityFile = `${process.env.HOME}/.ssh/id_rsa`;\n        const identityFileNew = `${process.env.HOME}/.ssh/id_rsa.2`;\n        files.push(fs_1.ensureFileIs(identityFile, mainKey.trim() + '\\n', 0o600));\n        if (deployKey && deployKeyNew) {\n            files.push(fs_1.ensureFileIs(identityFileNew, deployKeyNew.trim() + '\\n', 0o600));\n        }\n        // cSpell:ignore keyscan\n        const runtimeHost = yield getRuntimeHost_1.getRuntimeHost();\n        const runtimeHostPort = (yield io_1.input('runtime-host-port')) || '22';\n        const hostKeys = yield io_1.input('runtime-host-keys');\n        // (await exec(`ssh-keyscan -p ${runtimeHostPort} ${runtimeHost}`)).stdout;\n        if (hostKeys) {\n            console.log('Adding host keys:');\n            console.log(hostKeys);\n            files.push(fs_1.ensureFileContains(`${process.env.HOME}/.ssh/known_hosts`, hostKeys));\n        }\n        const config = `\nHost runtime-server\n  HostName ${runtimeHost}\n  Port ${runtimeHostPort}\n  User root\n  CheckHostIP no\n  StrictHostKeyChecking no\n`;\n        files.push(fs_1.ensureFileContains(`${process.env.HOME}/.ssh/config`, config));\n        yield Promise.all(files);\n    });\n}\n// cSpell:ignore executability\nfunction copySources() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const dir = yield io_1.input('deploy-directory');\n        yield spawn_1.spawn('rsync', \n        // Default gzip compression speeds up deploy\n        '--compress', \n        // Source source recursively\n        '--recursive', \n        // Preserve symlinks and executability\n        '--links', '--executability', \n        // Delete extraneous files on destination, even if IO errors occur\n        '--delete', '--ignore-errors', \n        // Local files to copy\n        dir, \n        // Remote runtime server and destination\n        `runtime-server:/opt/aven/${yield getServiceName_1.getServiceName()}`);\n    });\n}\nfunction copyServiceConfigs() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const configsRaw = yield io_1.input('service-config-files');\n        if (!configsRaw)\n            return;\n        const configs = configsRaw.split(' ');\n        yield spawn_1.spawn('rsync', '--recursive', \n        // Delete extraneous files on destination, even if IO errors occur\n        '--delete', '--ignore-errors', \n        // Local files to copy\n        ...configs, \n        // Remote runtime server and destination\n        `runtime-server:/etc/systemd/system/${yield getServiceName_1.getServiceName()}.service.d/`);\n        yield spawn_1.spawn('ssh', 'runtime-server', 'systemctl', 'daemon-reload');\n    });\n}\nfunction restartApplication() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const serviceName = yield getServiceName_1.getServiceName();\n        if ((yield io_1.input('disable-service')) !== 'yes')\n            yield spawn_1.spawn('ssh', 'runtime-server', 'systemctl', 'stop', serviceName);\n        // TODO: migrate db\n        if (yield spawn_1.exec('ssh ls /var/run/reboot-required').then(() => true, () => false)) {\n            yield spawn_1.spawn('ssh', 'runtime-server', 'reboot').catch(e => {\n                console.log('Error doing remote server reboot. Probably ok.');\n                console.log(e);\n            });\n        }\n        else {\n            if ((yield io_1.input('disable-service')) !== 'yes')\n                yield spawn_1.spawn('ssh', 'runtime-server', 'systemctl', 'start', serviceName);\n        }\n    });\n}\nfunction main() {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield setupShhConfig();\n        // TODO: Secrets\n        yield prepareRemoteServer_1.prepareRemoteServer();\n        yield copyServiceConfigs();\n        yield copySources();\n        yield restartApplication();\n    });\n}\nexports.main = main;\nif (!module.parent)\n    main().catch(reportError_1.reportError);\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst os = __importStar(require(\"os\"));\n/**\n * Commands\n *\n * Command Format:\n *   ::name key=value,key=value::message\n *\n * Examples:\n *   ::warning::This is the message\n *   ::set-env name=MY_VAR::some value\n */\nfunction issueCommand(command, properties, message) {\n    const cmd = new Command(command, properties, message);\n    process.stdout.write(cmd.toString() + os.EOL);\n}\nexports.issueCommand = issueCommand;\nfunction issue(name, message = '') {\n    issueCommand(name, {}, message);\n}\nexports.issue = issue;\nconst CMD_STRING = '::';\nclass Command {\n    constructor(command, properties, message) {\n        if (!command) {\n            command = 'missing.command';\n        }\n        this.command = command;\n        this.properties = properties;\n        this.message = message;\n    }\n    toString() {\n        let cmdStr = CMD_STRING + this.command;\n        if (this.properties && Object.keys(this.properties).length > 0) {\n            cmdStr += ' ';\n            let first = true;\n            for (const key in this.properties) {\n                if (this.properties.hasOwnProperty(key)) {\n                    const val = this.properties[key];\n                    if (val) {\n                        if (first) {\n                            first = false;\n                        }\n                        else {\n                            cmdStr += ',';\n                        }\n                        cmdStr += `${key}=${escapeProperty(val)}`;\n                    }\n                }\n            }\n        }\n        cmdStr += `${CMD_STRING}${escapeData(this.message)}`;\n        return cmdStr;\n    }\n}\n/**\n * Sanitizes an input into a string so it can be passed into issueCommand safely\n * @param input input to sanitize into a string\n */\nfunction toCommandValue(input) {\n    if (input === null || input === undefined) {\n        return '';\n    }\n    else if (typeof input === 'string' || input instanceof String) {\n        return input;\n    }\n    return JSON.stringify(input);\n}\nexports.toCommandValue = toCommandValue;\nfunction escapeData(s) {\n    return toCommandValue(s)\n        .replace(/%/g, '%25')\n        .replace(/\\r/g, '%0D')\n        .replace(/\\n/g, '%0A');\n}\nfunction escapeProperty(s) {\n    return toCommandValue(s)\n        .replace(/%/g, '%25')\n        .replace(/\\r/g, '%0D')\n        .replace(/\\n/g, '%0A')\n        .replace(/:/g, '%3A')\n        .replace(/,/g, '%2C');\n}\n//# sourceMappingURL=command.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.request = void 0;\nconst https_1 = require(\"https\");\nconst io_1 = require(\"./io\");\nfunction request(httpsUrl) {\n    return __awaiter(this, void 0, void 0, function* () {\n        io_1.debug('Request:', httpsUrl);\n        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n            let response = '';\n            const req = https_1.get(httpsUrl, res => {\n                res.on('data', chunk => {\n                    response += chunk;\n                });\n                res.on('end', () => {\n                    resolve(response);\n                    req.end();\n                });\n            });\n            req.on('error', reject);\n        }));\n    });\n}\nexports.request = request;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst command_1 = require(\"./command\");\nconst os = __importStar(require(\"os\"));\nconst path = __importStar(require(\"path\"));\n/**\n * The code to exit an action\n */\nvar ExitCode;\n(function (ExitCode) {\n    /**\n     * A code indicating that the action was successful\n     */\n    ExitCode[ExitCode[\"Success\"] = 0] = \"Success\";\n    /**\n     * A code indicating that the action was a failure\n     */\n    ExitCode[ExitCode[\"Failure\"] = 1] = \"Failure\";\n})(ExitCode = exports.ExitCode || (exports.ExitCode = {}));\n//-----------------------------------------------------------------------\n// Variables\n//-----------------------------------------------------------------------\n/**\n * Sets env variable for this action and future actions in the job\n * @param name the name of the variable to set\n * @param val the value of the variable. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction exportVariable(name, val) {\n    const convertedVal = command_1.toCommandValue(val);\n    process.env[name] = convertedVal;\n    command_1.issueCommand('set-env', { name }, convertedVal);\n}\nexports.exportVariable = exportVariable;\n/**\n * Registers a secret which will get masked from logs\n * @param secret value of the secret\n */\nfunction setSecret(secret) {\n    command_1.issueCommand('add-mask', {}, secret);\n}\nexports.setSecret = setSecret;\n/**\n * Prepends inputPath to the PATH (for this action and future actions)\n * @param inputPath\n */\nfunction addPath(inputPath) {\n    command_1.issueCommand('add-path', {}, inputPath);\n    process.env['PATH'] = `${inputPath}${path.delimiter}${process.env['PATH']}`;\n}\nexports.addPath = addPath;\n/**\n * Gets the value of an input.  The value is also trimmed.\n *\n * @param     name     name of the input to get\n * @param     options  optional. See InputOptions.\n * @returns   string\n */\nfunction getInput(name, options) {\n    const val = process.env[`INPUT_${name.replace(/ /g, '_').toUpperCase()}`] || '';\n    if (options && options.required && !val) {\n        throw new Error(`Input required and not supplied: ${name}`);\n    }\n    return val.trim();\n}\nexports.getInput = getInput;\n/**\n * Sets the value of an output.\n *\n * @param     name     name of the output to set\n * @param     value    value to store. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction setOutput(name, value) {\n    command_1.issueCommand('set-output', { name }, value);\n}\nexports.setOutput = setOutput;\n/**\n * Enables or disables the echoing of commands into stdout for the rest of the step.\n * Echoing is disabled by default if ACTIONS_STEP_DEBUG is not set.\n *\n */\nfunction setCommandEcho(enabled) {\n    command_1.issue('echo', enabled ? 'on' : 'off');\n}\nexports.setCommandEcho = setCommandEcho;\n//-----------------------------------------------------------------------\n// Results\n//-----------------------------------------------------------------------\n/**\n * Sets the action status to failed.\n * When the action exits it will be with an exit code of 1\n * @param message add error issue message\n */\nfunction setFailed(message) {\n    process.exitCode = ExitCode.Failure;\n    error(message);\n}\nexports.setFailed = setFailed;\n//-----------------------------------------------------------------------\n// Logging Commands\n//-----------------------------------------------------------------------\n/**\n * Gets whether Actions Step Debug is on or not\n */\nfunction isDebug() {\n    return process.env['RUNNER_DEBUG'] === '1';\n}\nexports.isDebug = isDebug;\n/**\n * Writes debug message to user log\n * @param message debug message\n */\nfunction debug(message) {\n    command_1.issueCommand('debug', {}, message);\n}\nexports.debug = debug;\n/**\n * Adds an error issue\n * @param message error issue message. Errors will be converted to string via toString()\n */\nfunction error(message) {\n    command_1.issue('error', message instanceof Error ? message.toString() : message);\n}\nexports.error = error;\n/**\n * Adds an warning issue\n * @param message warning issue message. Errors will be converted to string via toString()\n */\nfunction warning(message) {\n    command_1.issue('warning', message instanceof Error ? message.toString() : message);\n}\nexports.warning = warning;\n/**\n * Writes info to log with console.log.\n * @param message info message\n */\nfunction info(message) {\n    process.stdout.write(message + os.EOL);\n}\nexports.info = info;\n/**\n * Begin an output group.\n *\n * Output until the next `groupEnd` will be foldable in this group\n *\n * @param name The name of the output group\n */\nfunction startGroup(name) {\n    command_1.issue('group', name);\n}\nexports.startGroup = startGroup;\n/**\n * End an output group.\n */\nfunction endGroup() {\n    command_1.issue('endgroup');\n}\nexports.endGroup = endGroup;\n/**\n * Wrap an asynchronous function call in a group.\n *\n * Returns the same type as the function itself.\n *\n * @param name The name of the group\n * @param fn The function to wrap in the group\n */\nfunction group(name, fn) {\n    return __awaiter(this, void 0, void 0, function* () {\n        startGroup(name);\n        let result;\n        try {\n            result = yield fn();\n        }\n        finally {\n            endGroup();\n        }\n        return result;\n    });\n}\nexports.group = group;\n//-----------------------------------------------------------------------\n// Wrapper action state\n//-----------------------------------------------------------------------\n/**\n * Saves state for current action, the state can only be retrieved by this action's post job execution.\n *\n * @param     name     name of the state to store\n * @param     value    value to store. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction saveState(name, value) {\n    command_1.issueCommand('save-state', { name }, value);\n}\nexports.saveState = saveState;\n/**\n * Gets the value of an state set by this action's main execution.\n *\n * @param     name     name of the state to get\n * @returns   string\n */\nfunction getState(name) {\n    return process.env[`STATE_${name}`] || '';\n}\nexports.getState = getState;\n//# sourceMappingURL=core.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getServiceName = void 0;\nconst io_1 = require(\"./io\");\nconst getDomains_1 = require(\"./getDomains\");\nfunction getServiceName() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const serviceName = yield io_1.input('service-name');\n        if (serviceName)\n            return serviceName;\n        const domains = yield getDomains_1.getDomains();\n        if (!domains || !domains[0])\n            throw new Error('Domains needed if service-name is unset!');\n        return domains[0];\n    });\n}\nexports.getServiceName = getServiceName;\n","var module$1 = /^[a-z\\d](?:[a-z\\d]|-(?=[a-z\\d])){0,38}$/i;\n\nmodule.exports = module$1;\n","module.exports = require(\"path\");","module.exports = require(\"util\");","module.exports = require(\"fs\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isGitHubAction = void 0;\nexports.isGitHubAction = process.env.GITHUB_ACTIONS === 'true' ||\n    process.argv.includes('--gh-actions');\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportError = void 0;\nfunction reportError(e) {\n    process.exitCode = 1;\n    // TODO: Add colors for GH Actions\n    console.log('Error in run!');\n    console.log(e);\n}\nexports.reportError = reportError;\n","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'loaded', {\n\t\tenumerable: true,\n\t\tget: function() { return module.l; }\n\t});\n\tObject.defineProperty(module, 'id', {\n\t\tenumerable: true,\n\t\tget: function() { return module.i; }\n\t});\n\treturn module;\n};"]}