"{\"version\":3,\"sources\":[\"/webpack/bootstrap\",\"../src/utils/fs.ts\",\"../src/utils/io.ts\",\"../src/prepare/setup/MonitorTools/Netdata.ts\",\"../src/prepare/setup/Timezone.ts\",\"../src/prepare/setup/Nginx.ts\",\"../src/prepare/setup/MonitorTools/Journalbeat.ts\",\"../external \\\"os\\\"\",\"../src/prepare/index.ts\",\"../external \\\"child_process\\\"\",\"../src/prepare/setup/MonitoringTools.ts\",\"../src/prepare/setup/MonitorTools/FailureNotificationServices.ts\",\"../src/prepare/setup/aptDependencies.ts\",\"../src/prepare/setup/MonitorTools/PersistentJournal.ts\",\"../src/utils/printOSInfo.ts\",\"../src/utils/spawn.ts\",\"../src/prepare/setup/Security.ts\",\"../src/prepare/setup/basicServer.ts\",\"../node_modules/@actions/core/lib/command.js\",\"../src/prepare/setup/MainServiceFiles.ts\",\"../src/prepare/setup/readAvenConfig.ts\",\"../node_modules/@actions/core/lib/core.js\",\"../external \\\"path\\\"\",\"../external \\\"util\\\"\",\"../src/prepare/setup/Root.ts\",\"../external \\\"fs\\\"\",\"../src/utils/User.ts\",\"../src/utils/isGitHubAction.ts\",\"../src/prepare/setup/MonitorTools/Cockpit.ts\",\"/webpack/runtime/node module decorator\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"ab\",\"__dirname\",\"startup\",\"runtime\",\"__awaiter\",\"this\",\"thisArg\",\"_arguments\",\"P\",\"generator\",\"adopt\",\"value\",\"resolve\",\"Promise\",\"reject\",\"fulfilled\",\"step\",\"next\",\"e\",\"rejected\",\"result\",\"done\",\"then\",\"apply\",\"Object\",\"defineProperty\",\"fs_1\",\"io_1\",\"unlink\",\"args\",\"path\",\"debug\",\"promises\",\"chown\",\"chmod\",\"copyFile\",\"src\",\"dest\",\"mkdir\",\"dir\",\"options\",\"mode\",\"assign\",\"recursive\",\"exists\",\"filePath\",\"access\",\"ensureFileContains\",\"filename\",\"contents\",\"current\",\"readFile\",\"catch\",\"toString\",\"includes\",\"length\",\"writeFile\",\"ensureFileIs\",\"ensureFilesAre\",\"list\",\"all\",\"map\",\"ensureLinkIs\",\"target\",\"readlink\",\"code\",\"undefined\",\"symlink\",\"core_1\",\"isGitHubAction_1\",\"util_1\",\"input\",\"name\",\"isGitHubAction\",\"Error\",\"getInput\",\"info\",\"formatWithOptions\",\"colors\",\"process\",\"env\",\"DEBUG\",\"console\",\"log\",\"verbosityLevel\",\"raw\",\"level\",\"parseInt\",\"isFinite\",\"RangeError\",\"spawn_1\",\"setupNetdata\",\"installScriptStable\",\"exec\",\"readAvenConfig_1\",\"setupTimezone\",\"runtimeServerTimezone\",\"readAvenConfig\",\"aptDependencies_1\",\"addAptDependencies\",\"certbotWebrootPath\",\"letsencryptLive\",\"nginxConf\",\"setupNginxSnips\",\"snips\",\"letsencrypt\",\"entries\",\"config\",\"setupNginxConfigs\",\"domains\",\"keys\",\"public\",\"private\",\"existing\",\"conf\",\"basic\",\"gzip\",\"logging\",\"validForwardedHeaderPattern\",\"servers\",\"ssl\",\"setupNginxBasicServers\",\"serverConfigDefault\",\"setupNginxServersFull\",\"webRootPath\",\"service\",\"serviceName\",\"upstreamUniqueName\",\"replace\",\"socketFilename\",\"workingDir\",\"upstreamHost\",\"serverConfig\",\"join\",\"nginxConfigFile\",\"setupNginxBasic\",\"certbotCliConfig\",\"certbotPostRenewNginx\",\"setupCertbot\",\"outputFile\",\"certbotPostRenewExampleFullChain\",\"doCertbot\",\"spawn\",\"reduce\",\"res\",\"concat\",\"setTimeout\",\"hook\",\"checkNginxConfig\",\"setupNginx\",\"domain\",\"setupJournalbeat\",\"journalbeat\",\"disableLogging\",\"reload\",\"journalbeatConfig\",\"kibanaHost\",\"configured\",\"elastic\",\"hosts\",\"JSON\",\"stringify\",\"username\",\"password\",\"logstashHosts\",\"change\",\"require\",\"Nginx_1\",\"MainServiceFiles_1\",\"MonitoringTools_1\",\"basicServer_1\",\"printOSInfo_1\",\"prepare\",\"printOSInfo\",\"basicServerSetup\",\"setupMonitoringTools\",\"setupMainServiceFiles\",\"parent\",\"exitCode\",\"Journalbeat_1\",\"Netdata_1\",\"Cockpit_1\",\"FailureNotificationServices_1\",\"PersistentJournal_1\",\"setupCockpit\",\"setupFailureNotificationService\",\"setupPersistentJournal\",\"deps\",\"dependencies\",\"push\",\"setupAptDependencies\",\"_a\",\"_b\",\"aptDependencies\",\"runtimeAptDependencies\",\"useNew\",\"dpkgForceConfOptions\",\"stdio\",\"DEBIAN_FRONTEND\",\"Set\",\"release\",\"osVersion\",\"split\",\"child_process_1\",\"defaultShell\",\"command\",\"first\",\"defOpts\",\"opts\",\"unshift\",\"shell\",\"proc\",\"ret\",\"on\",\"child\",\"execP\",\"promisify\",\"setupSecurity\",\"changed\",\"Timezone_1\",\"Security_1\",\"Root_1\",\"c\",\"authorizedKeys\",\"setAuthorizedKeys\",\"__importStar\",\"mod\",\"__esModule\",\"k\",\"hasOwnProperty\",\"os\",\"issueCommand\",\"properties\",\"message\",\"cmd\",\"Command\",\"stdout\",\"write\",\"EOL\",\"issue\",\"CMD_STRING\",\"[object Object]\",\"cmdStr\",\"key\",\"val\",\"escapeProperty\",\"escapeData\",\"s\",\"serviceDescription\",\"description\",\"startServerCommand\",\"extraService\",\"extraConfigs\",\"serviceFile\",\"HomeDir\",\"runtimeUser\",\"runtimeUid\",\"runtimeGid\",\"dir1\",\"dir2\",\"dir3\",\"Number\",\"serviceFileContents\",\"error\",\"data\",\"stdin\",\"d\",\"timeout\",\"clearTimeout\",\"parsed\",\"parse\",\"command_1\",\"ExitCode\",\"exportVariable\",\"setSecret\",\"secret\",\"addPath\",\"inputPath\",\"delimiter\",\"toUpperCase\",\"required\",\"trim\",\"setOutput\",\"setFailed\",\"Failure\",\"warning\",\"startGroup\",\"endGroup\",\"group\",\"fn\",\"saveState\",\"getState\",\"User_1\",\"path_1\",\"user\",\"userDir\",\"userHome\",\"sshConfDir\",\"setupRoot\",\"sources\",\"fixKnownHosts\",\"userGroups\",\"UsernameInUseUserAddExitValue\",\"createAndConfigureUser\",\"home\",\"ensureKey\",\"GitHubKnownHosts\",\"GITHUB_ACTIONS\",\"argv\",\"nmd\",\"paths\",\"children\",\"enumerable\",\"get\"],\"mappings\":\"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\",\"file\":\"index.js\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t__webpack_require__.ab = __dirname + \\\"/\\\";\\n\\n \\t// the startup function\\n \\tfunction startup() {\\n \\t\\t// Load entry module and return exports\\n \\t\\treturn __webpack_require__(96);\\n \\t};\\n \\t// initialize runtime\\n \\truntime(__webpack_require__);\\n\\n \\t// run startup\\n \\treturn startup();\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"fs\\\");\\nconst io_1 = require(\\\"./io\\\");\\nfunction unlink(...args) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const [path] = args;\\n        io_1.debug('unlink:', path);\\n        yield fs_1.promises.unlink(...args);\\n    });\\n}\\nexports.unlink = unlink;\\nfunction chown(...args) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const [path, value] = args;\\n        io_1.debug('chown:', path, 'to', value);\\n        yield fs_1.promises.chown(...args);\\n    });\\n}\\nexports.chown = chown;\\nfunction chmod(...args) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const [path, value] = args;\\n        io_1.debug('chmod:', path, 'to', value);\\n        yield fs_1.promises.chmod(...args);\\n    });\\n}\\nexports.chmod = chmod;\\nfunction copyFile(...args) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const [src, dest] = args;\\n        io_1.debug('copyFile:', src, 'to', dest);\\n        yield fs_1.promises.copyFile(...args);\\n    });\\n}\\nexports.copyFile = copyFile;\\nfunction mkdir(dir, options) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        if (typeof options !== 'object') {\\n            options = { mode: options };\\n        }\\n        options = Object.assign({ recursive: true }, options);\\n        io_1.debug('mkdir:', dir);\\n        yield fs_1.promises.mkdir(dir, options);\\n    });\\n}\\nexports.mkdir = mkdir;\\nfunction exists(filePath) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        return fs_1.promises.access(filePath).then(() => true, () => false);\\n    });\\n}\\nexports.exists = exists;\\nfunction ensureFileContains(filename, contents) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const current = (yield fs_1.promises.readFile(filename).catch(() => '')).toString();\\n        if (current.includes(contents))\\n            return false;\\n        io_1.debug('Appending to file:', filename, 'bytes:', contents.length);\\n        yield fs_1.promises.writeFile(filename, current + contents);\\n        return true;\\n    });\\n}\\nexports.ensureFileContains = ensureFileContains;\\nfunction ensureFileIs(filename, contents, mode) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        // We could just skip the read part of this but this preserves modification times\\n        const current = (yield fs_1.promises.readFile(filename).catch(() => '')).toString();\\n        if (current === contents)\\n            return false;\\n        io_1.debug('Writing to file:', filename, 'bytes:', contents.length);\\n        yield fs_1.promises.writeFile(filename, contents, { mode });\\n        return true;\\n    });\\n}\\nexports.ensureFileIs = ensureFileIs;\\nfunction ensureFilesAre(list) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        yield Promise.all(list.map(({ filename, contents }) => ensureFileIs(filename, contents)));\\n    });\\n}\\nexports.ensureFilesAre = ensureFilesAre;\\nfunction ensureLinkIs(target, path) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const current = yield fs_1.promises.readlink(path).catch(e => {\\n            if (e.code === 'ENOENT')\\n                return undefined;\\n            throw e;\\n        });\\n        if (target === current)\\n            return false;\\n        if (current !== undefined)\\n            yield unlink(path);\\n        io_1.debug('Updating symlink', path, 'to point to', target);\\n        yield fs_1.promises.symlink(target, path);\\n        return true;\\n    });\\n}\\nexports.ensureLinkIs = ensureLinkIs;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst core_1 = require(\\\"@actions/core\\\");\\nconst isGitHubAction_1 = require(\\\"./isGitHubAction\\\");\\nconst util_1 = require(\\\"util\\\");\\nfunction input(name) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        if (!isGitHubAction_1.isGitHubAction) {\\n            throw new Error('Not made to work in other environments yet!');\\n            // TODO: iff not otherwise read from local config, cli arguments, or prompt the dev?\\n        }\\n        return core_1.getInput(name);\\n    });\\n}\\nexports.input = input;\\nfunction debug(...info) {\\n    if (isGitHubAction_1.isGitHubAction) {\\n        core_1.debug(util_1.formatWithOptions({ colors: true }, ...info));\\n        return;\\n    }\\n    if (process.env.DEBUG === undefined)\\n        return;\\n    console.log(...info);\\n}\\nexports.debug = debug;\\nfunction verbosityLevel() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const raw = yield input('verbosity');\\n        const level = parseInt(raw);\\n        if (!isFinite(level))\\n            throw new Error(`Invalid verbosity: ${raw}.`);\\n        if (level < 0)\\n            throw new RangeError(`Invalid verbosity: ${level}. 0 is minimum.`);\\n        if (level > 3)\\n            throw new RangeError(`Invalid verbosity: ${level}. 3 is maximum.`);\\n        return level;\\n    });\\n}\\nexports.verbosityLevel = verbosityLevel;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst spawn_1 = require(\\\"../../../utils/spawn\\\");\\nfunction setupNetdata() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        // Nightly is recommended by Netdata https://docs.netdata.cloud/packaging/installer/#nightly-vs-stable-releases\\n        // const installScriptNightly = 'https://my-netdata.io/kickstart.sh';\\n        const installScriptStable = 'https://my-netdata.io/kickstart-static64.sh';\\n        // cSpell:ignore dont\\n        yield spawn_1.exec(`bash <(curl -Ss \\\"${installScriptStable}\\\") --dont-wait`);\\n        // TODO: configure to work with nginx?\\n    });\\n}\\nexports.setupNetdata = setupNetdata;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"../../utils/fs\\\");\\nconst readAvenConfig_1 = require(\\\"./readAvenConfig\\\");\\nfunction setupTimezone() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const { runtimeServerTimezone } = yield readAvenConfig_1.readAvenConfig();\\n        if (!runtimeServerTimezone)\\n            return;\\n        console.log('Setting timezone to:', runtimeServerTimezone);\\n        const path = '/etc/localtime';\\n        const next = `/usr/share/zoneinfo/${runtimeServerTimezone}`;\\n        yield fs_1.ensureLinkIs(next, path);\\n    });\\n}\\nexports.setupTimezone = setupTimezone;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"../../utils/fs\\\");\\nconst spawn_1 = require(\\\"../../utils/spawn\\\");\\nconst aptDependencies_1 = require(\\\"./aptDependencies\\\");\\nconst readAvenConfig_1 = require(\\\"./readAvenConfig\\\");\\nconst io_1 = require(\\\"../../utils/io\\\");\\naptDependencies_1.addAptDependencies('nginx', 'certbot', 'ssl-cert');\\n// cSpell:ignore letsencrypt webroot\\nconst certbotWebrootPath = '/var/lib/letsencrypt/webroot';\\n// Folder containing live certs from letsencrypt\\nconst letsencryptLive = '/etc/letsencrypt/live';\\nconst nginxConf = `user www-data;\\nworker_processes auto;\\npid /run/nginx.pid;\\n\\ninclude modules-enabled/*.conf;\\n\\nevents {\\n    worker_connections 768;\\n    # multi_accept on;\\n}\\n\\nhttp {\\n    include conf.d/*.conf;\\n}\\n`;\\nfunction setupNginxSnips() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const dir = '/etc/nginx/snips';\\n        yield fs_1.mkdir(dir);\\n        const snips = {};\\n        snips['force-main-https'] = `location / {\\n    return 301 https://$server_name$request_uri;\\n    #rewrite ^ https://$server_name$request_uri? permanent;\\n}\\n`;\\n        snips.letsencrypt = `location ^~ /.well-known/acme-challenge/ {\\n    default_type \\\"text/plain\\\";\\n    root ${certbotWebrootPath};\\n}\\n\\nlocation = /.well-known/acme-challenge/ {\\n    return 404;\\n}\\n`;\\n        // Simplified proxy headers\\n        snips['proxy-forwarded-headers'] = `proxy_set_header Host $host;\\nproxy_set_header Forwarded $proxy_add_forwarded;\\n`;\\n        // cSpell:ignore SAMEORIGIN\\n        // Popular forwarded headers\\n        snips['proxy-headers'] = `proxy_set_header Host $host;\\n#proxy_set_header Port $server_port;\\n#proxy_set_header X-Forwarded-Port $server_port;\\nproxy_set_header X-Real-IP $remote_addr;\\nproxy_set_header X-Forwarded-Proto $scheme;\\n#proxy_set_header X-Forwarded-Ssl $https;\\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n#proxy_set_header X-Frame-Options SAMEORIGIN;\\n`;\\n        // Trust Cloudflare to set some headers for us\\n        snips['trust-cloudflare-ip'] = `set_real_ip_from 103.21.244.0/22;\\nset_real_ip_from 103.22.200.0/22;\\nset_real_ip_from 103.31.4.0/22;\\nset_real_ip_from 104.16.0.0/12;\\nset_real_ip_from 108.162.192.0/18;\\nset_real_ip_from 131.0.72.0/22;\\nset_real_ip_from 141.101.64.0/18;\\nset_real_ip_from 162.158.0.0/15;\\nset_real_ip_from 172.64.0.0/13;\\nset_real_ip_from 173.245.48.0/20;\\nset_real_ip_from 188.114.96.0/20;\\nset_real_ip_from 190.93.240.0/20;\\nset_real_ip_from 197.234.240.0/22;\\nset_real_ip_from 198.41.128.0/17;\\nset_real_ip_from 2400:cb00::/32;\\nset_real_ip_from 2606:4700::/32;\\nset_real_ip_from 2803:f800::/32;\\nset_real_ip_from 2405:b500::/32;\\nset_real_ip_from 2405:8100::/32;\\nset_real_ip_from 2c0f:f248::/32;\\nset_real_ip_from 2a06:98c0::/29;\\n\\n# use any of the following two\\nreal_ip_header CF-Connecting-IP;\\n#real_ip_header X-Forwarded-For;\\n`;\\n        // cSpell:ignore websockets fastcgi\\n        // Headers needed to enable Web Sockets\\n        snips['websockets-proxy-headers'] = `proxy_http_version 1.1;\\nproxy_set_header Upgrade $http_upgrade;\\nproxy_set_header Connection $connection_upgrade;\\n`;\\n        yield Promise.all([\\n            // let Ubuntu manage this one\\n            fs_1.ensureLinkIs('../snippets/fastcgi-php.conf', `${dir}/fastcgi-php.conf`),\\n            fs_1.ensureFilesAre(Object.entries(snips).map(([config, contents]) => ({\\n                filename: `${dir}/${config}.conf`,\\n                contents,\\n            }))),\\n        ]);\\n    });\\n}\\n// cSpell:ignore nopush nodelay keepalive sendfile proxied\\nfunction setupNginxConfigs() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const dir = '/etc/nginx/conf.d';\\n        const { domains } = yield readAvenConfig_1.readAvenConfig();\\n        if (!domains)\\n            throw new Error('Domains unset!');\\n        const keys = {\\n            // cSpell:ignore snakeoil\\n            public: '/etc/ssl/certs/ssl-cert-snakeoil.pem',\\n            private: '/etc/ssl/private/ssl-cert-snakeoil.key',\\n        };\\n        // Only use real certs if they exist.\\n        yield fs_1.exists(`${letsencryptLive}/${domains[0]}/fullchain.pem`).then(existing => {\\n            if (existing) {\\n                keys.public = `${letsencryptLive}/${domains[0]}/fullchain.pem`;\\n                keys.private = `${letsencryptLive}/${domains[0]}/privkey.pem`;\\n            }\\n        });\\n        const conf = {};\\n        conf.basic = `sendfile on;\\ntcp_nopush on;\\ntcp_nodelay on;\\nkeepalive_timeout 65;\\ntypes_hash_max_size 2048;\\n# server_tokens off;\\n\\n# server_names_hash_bucket_size 64;\\n# server_name_in_redirect off;\\n\\ninclude /etc/nginx/mime.types;\\ndefault_type application/octet-stream;\\n`;\\n        conf.gzip = `gzip on;\\ngzip_disable \\\"msie6\\\";\\n\\n# gzip_vary on;\\n# gzip_proxied any;\\n# gzip_comp_level 6;\\n# gzip_buffers 16 8k;\\n# gzip_http_version 1.1;\\n# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\\n`;\\n        // Allow upgrading http connections. Required for Websockets.\\n        conf['http-upgrade'] = `map $http_upgrade $connection_upgrade {\\n    default upgrade;\\n    ''      close;\\n}\\n`;\\n        // Where should we log to\\n        conf.logging = `access_log /var/log/nginx/access.log;\\nerror_log /var/log/nginx/error.log;\\n`;\\n        const validForwardedHeaderPattern = '\\\"~^(,[ \\\\\\\\\\\\\\\\t]*)*([!#$%&\\\\'*+.^_`|~0-9A-Za-z-]+=([!#$%&\\\\'*+.^_`|~0-9A-Za-z-]+|\\\\\\\\\\\"([\\\\\\\\\\\\\\\\t \\\\\\\\\\\\\\\\x21\\\\\\\\\\\\\\\\x23-\\\\\\\\\\\\\\\\x5B\\\\\\\\\\\\\\\\x5D-\\\\\\\\\\\\\\\\x7E\\\\\\\\\\\\\\\\x80-\\\\\\\\\\\\\\\\xFF]|\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\[\\\\\\\\\\\\\\\\t \\\\\\\\\\\\\\\\x21-\\\\\\\\\\\\\\\\x7E\\\\\\\\\\\\\\\\x80-\\\\\\\\\\\\\\\\xFF])*\\\\\\\\\\\"))?(;([!#$%&\\\\'*+.^_`|~0-9A-Za-z-]+=([!#$%&\\\\'*+.^_`|~0-9A-Za-z-]+|\\\\\\\\\\\"([\\\\\\\\\\\\\\\\t \\\\\\\\\\\\\\\\x21\\\\\\\\\\\\\\\\x23-\\\\\\\\\\\\\\\\x5B\\\\\\\\\\\\\\\\x5D-\\\\\\\\\\\\\\\\x7E\\\\\\\\\\\\\\\\x80-\\\\\\\\\\\\\\\\xFF]|\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\[\\\\\\\\\\\\\\\\t \\\\\\\\\\\\\\\\x21-\\\\\\\\\\\\\\\\x7E\\\\\\\\\\\\\\\\x80-\\\\\\\\\\\\\\\\xFF])*\\\\\\\\\\\"))?)*([ \\\\\\\\\\\\\\\\t]*,([ \\\\\\\\\\\\\\\\t]*([!#$%&\\\\'*+.^_`|~0-9A-Za-z-]+=([!#$%&\\\\'*+.^_`|~0-9A-Za-z-]+|\\\\\\\\\\\"([\\\\\\\\\\\\\\\\t \\\\\\\\\\\\\\\\x21\\\\\\\\\\\\\\\\x23-\\\\\\\\\\\\\\\\x5B\\\\\\\\\\\\\\\\x5D-\\\\\\\\\\\\\\\\x7E\\\\\\\\\\\\\\\\x80-\\\\\\\\\\\\\\\\xFF]|\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\[\\\\\\\\\\\\\\\\t \\\\\\\\\\\\\\\\x21-\\\\\\\\\\\\\\\\x7E\\\\\\\\\\\\\\\\x80-\\\\\\\\\\\\\\\\xFF])*\\\\\\\\\\\"))?(;([!#$%&\\\\'*+.^_`|~0-9A-Za-z-]+=([!#$%&\\\\'*+.^_`|~0-9A-Za-z-]+|\\\\\\\\\\\"([\\\\\\\\\\\\\\\\t \\\\\\\\\\\\\\\\x21\\\\\\\\\\\\\\\\x23-\\\\\\\\\\\\\\\\x5B\\\\\\\\\\\\\\\\x5D-\\\\\\\\\\\\\\\\x7E\\\\\\\\\\\\\\\\x80-\\\\\\\\\\\\\\\\xFF]|\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\[\\\\\\\\\\\\\\\\t \\\\\\\\\\\\\\\\x21-\\\\\\\\\\\\\\\\x7E\\\\\\\\\\\\\\\\x80-\\\\\\\\\\\\\\\\xFF])*\\\\\\\\\\\"))?)*)?)*$\\\"\\\\n';\\n        //\\n        conf['proxy-add-forwarded'] = `map $remote_addr $proxy_forwarded_elem {\\n    # IPv4 addresses can be sent as-is\\n    ~^[0-9.]+$          \\\"for=$remote_addr\\\";\\n\\n    # IPv6 addresses need to be bracketed and quoted\\n    ~^[0-9A-Fa-f:.]+$   \\\"for=\\\\\\\\\\\"[$remote_addr]\\\\\\\\\\\"\\\";\\n\\n    # Unix domain socket names cannot be represented in RFC 7239 syntax\\n    default             \\\"for=unknown\\\";\\n}\\n\\nmap $http_forwarded $proxy_add_forwarded {\\n    # If the incoming Forwarded header is syntactically valid, append to it\\n    ${validForwardedHeaderPattern} \\\"$http_forwarded, $proxy_forwarded_elem\\\";\\n\\n    # Otherwise, replace it\\n    default \\\"$proxy_forwarded_elem\\\";\\n}\\n`;\\n        // List of nginx server blocks (in files)\\n        conf.servers = `include servers/*.conf;\\n`;\\n        // Default SSL configurations.\\n        conf.ssl = `##\\n# SSL Settings\\n##\\n\\n# Default keys. Overridden in server configs.\\nssl_certificate     ${keys.public};\\nssl_certificate_key ${keys.private};\\n\\n\\nssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\\nssl_prefer_server_ciphers on;\\n`;\\n        yield fs_1.mkdir(dir).then(() => fs_1.ensureFilesAre(Object.entries(conf).map(([config, contents]) => ({\\n            filename: `${dir}/${config}.conf`,\\n            contents,\\n        }))));\\n    });\\n}\\nfunction setupNginxBasicServers() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const dir = '/etc/nginx/servers';\\n        yield fs_1.mkdir(dir);\\n        const serverConfigDefault = `server {\\n      listen 80;\\n      listen [::]:80;\\n      listen 443 ssl;\\n      listen [::]:443 ssl;\\n  \\n      include snips/letsencrypt.conf;\\n  \\n      location / {\\n          default_type text/plain;\\n          return 200 'Nothing to see here...';\\n      }\\n  }\\n  `;\\n        yield fs_1.ensureFileIs(`${dir}/00_default.conf`, serverConfigDefault);\\n    });\\n}\\nfunction setupNginxServersFull() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const { webRootPath, domains, service: { name: serviceName }, } = yield readAvenConfig_1.readAvenConfig();\\n        if (!domains)\\n            throw new Error('Domains unset!');\\n        if (webRootPath)\\n            yield fs_1.mkdir(webRootPath);\\n        const upstreamUniqueName = domains[0].replace('.', '_');\\n        // Name of the socket file used for communications with\\n        const socketFilename = 'sock';\\n        // Directory the daemon runs in\\n        const workingDir = `/run/${serviceName}`;\\n        // Nginx backend location\\n        const upstreamHost = `unix:${workingDir}/${socketFilename}`;\\n        const serverConfig = `server {\\n    server_name ${domains.join(' ')};\\n    listen 80 default_server;\\n    listen [::]:80 default_server;\\n\\n    include snips/letsencrypt.conf;\\n    include snips/force-main-https.conf;\\n}\\n\\nserver {\\n    server_name ${domains.join(' ')};\\n    listen 443 ssl default_server;\\n    listen [::]:443 ssl default_server;\\n\\n    ssl_certificate     ${letsencryptLive}/${domains[0]}/fullchain.pem;\\n    ssl_certificate_key ${letsencryptLive}/${domains[0]}/privkey.pem;\\n\\n    include snips/trust-cloudflare-ip.conf;\\n\\n    location / ${!webRootPath\\n            ? ''\\n            : `{\\n      root ${webRootPath};\\n      # If files exist in root, serve them. Otherwise fallback to proxy.\\n      try_files $uri $uri/index.html @proxyHandler;\\n    }\\n    \\n    location @proxyHandler `}{\\n        include snips/websockets-proxy-headers.conf;\\n        include snips/proxy-headers.conf;\\n        proxy_pass http://${upstreamUniqueName};\\n    }\\n}\\n\\nupstream ${upstreamUniqueName} {\\n    server ${upstreamHost} fail_timeout=0;\\n}\\n`;\\n        yield fs_1.ensureFileIs(`/etc/nginx/servers/${domains[0]}.conf`, serverConfig);\\n    });\\n}\\nconst nginxConfigFile = '/etc/nginx/nginx.conf';\\nfunction setupNginxBasic() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        yield Promise.all([\\n            fs_1.ensureFileIs(nginxConfigFile, nginxConf),\\n            setupNginxSnips(),\\n            setupNginxConfigs(),\\n            setupNginxBasicServers(),\\n        ]);\\n    });\\n}\\n// cSpell:ignore logrotate logrotation\\nconst certbotCliConfig = `authenticator = webroot\\nwebroot-path = ${certbotWebrootPath}\\n\\n# Because we are using logrotate for greater flexibility, disable the\\n# internal certbot logrotation.\\nmax-log-backups = 0\\n`;\\nconst certbotPostRenewNginx = `#!/bin/bash\\nsystemctl reload nginx\\n`;\\n// cSpell:ignore YOURDOMAIN privkey fullchain noninteractive\\nfunction setupCertbot() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const { domains } = yield readAvenConfig_1.readAvenConfig();\\n        if (!domains)\\n            throw new Error('Domains unset!');\\n        yield Promise.all([\\n            fs_1.ensureFileIs('/etc/letsencrypt/cli.ini', certbotCliConfig),\\n            fs_1.mkdir(certbotWebrootPath),\\n        ]);\\n        /**\\n         * Use this for other services that depend on generated keys but require them combined. Like ZNC.\\n         */\\n        const outputFile = '/var/lib/znc/znc.pem';\\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\\n        const certbotPostRenewExampleFullChain = `#!/bin/bash\\nYOURDOMAIN=\\\"${domains[0]}\\\"\\n\\n[[ $RENEWED_LINEAGE != \\\"${letsencryptLive}/$YOURDOMAIN\\\" ]] && exit 0\\n\\n# Combine certs into single file for some applications that don't support separation\\ncat ${letsencryptLive}/$YOURDOMAIN/{privkey,fullchain}.pem > ${outputFile}\\n`;\\n        // TODO: Support multiple independent domains that serve different websites.\\n        function doCertbot() {\\n            return __awaiter(this, void 0, void 0, function* () {\\n                if (!domains)\\n                    throw new Error('Domains unset!');\\n                // Run once for each nginx server. Generates one key pair. Must include all domains that share server.\\n                yield spawn_1.spawn('certbot', \\n                // cSpell:ignore certonly\\n                'certonly', '--expand', '--noninteractive', '--agree-tos', \\n                // Registered e-mail\\n                '-m', \\n                // TODO: use better email\\n                `admin@${domains[0]}`, \\n                // Add a \\\"--domain\\\" before each domain\\n                ...domains.reduce((res, current) => res.concat('--domain', current), []));\\n            });\\n        }\\n        yield doCertbot().catch(() => __awaiter(this, void 0, void 0, function* () {\\n            // Sometimes, certbot is running on the runtime server (because of automatic certificate renewal with Systemd timer)\\n            // When that happens, the executable fails. So, let's just wait 15 seconds and try again.\\n            // If it fails *again*, for developer to manually re-run to fix.\\n            // TODO: test if correct error code\\n            yield new Promise(resolve => setTimeout(resolve, 15e3));\\n            return doCertbot();\\n        }));\\n        // Running certbot creates the renewal folders we need\\n        const hook = '/etc/letsencrypt/renewal-hooks/deploy/reload-nginx';\\n        yield fs_1.ensureFileIs(hook, certbotPostRenewNginx);\\n        yield fs_1.chmod(hook, 0o755);\\n    });\\n}\\nfunction checkNginxConfig() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        yield spawn_1.spawn('nginx', '-tc', nginxConfigFile);\\n    });\\n}\\nfunction setupNginx() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const { domains } = yield readAvenConfig_1.readAvenConfig();\\n        if (!domains)\\n            return;\\n        // Ensure Let's Encrypt configuration is setup\\n        yield setupNginxBasic();\\n        yield checkNginxConfig().catch(() => __awaiter(this, void 0, void 0, function* () {\\n            io_1.debug('Something went wrong. Clearing possibly broken configs and trying again.');\\n            // TODO: Only clear out failing configs\\n            yield Promise.all(domains.map(domain => fs_1.unlink(`/etc/nginx/servers/${domain}.conf`).catch(() => { })));\\n            yield checkNginxConfig();\\n            // If we fail again here, we've got bigger problems.\\n        }));\\n        yield spawn_1.exec(`systemctl reload nginx.service`);\\n        // Before trying to get possibly new keys\\n        yield setupCertbot();\\n        // Only then do we make sure the rest of the server files are setup\\n        yield setupNginxServersFull();\\n        yield checkNginxConfig();\\n        yield spawn_1.exec(`systemctl reload nginx.service`);\\n    });\\n}\\nexports.setupNginx = setupNginx;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"../../../utils/fs\\\");\\nconst spawn_1 = require(\\\"../../../utils/spawn\\\");\\nconst readAvenConfig_1 = require(\\\"../readAvenConfig\\\");\\nfunction setupJournalbeat() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const { journalbeat } = yield readAvenConfig_1.readAvenConfig();\\n        if (!journalbeat)\\n            return;\\n        yield spawn_1.exec('wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | apt-key add -');\\n        // Replace list every time\\n        yield fs_1.ensureFileIs('/etc/apt/sources.list.d/elastic-7.x.list', 'deb https://artifacts.elastic.co/packages/7.x/apt stable main\\\\n');\\n        yield spawn_1.exec('apt-get update');\\n        yield spawn_1.exec('apt-get install -y journalbeat');\\n        // TODO: Add to list of apt\\n        yield spawn_1.exec('systemctl enable journalbeat');\\n        const disableLogging = `\\n[Service]\\nEnvironment=\\\"BEAT_LOG_OPTS= \\\"\\n`;\\n        const reload = fs_1.mkdir('/lib/systemd/system/journalbeat.service.d')\\n            .then(() => fs_1.ensureFileIs('/lib/systemd/system/journalbeat.service.d/disable-logging.conf', disableLogging))\\n            .then(() => spawn_1.exec('systemctl daemon-reload'));\\n        let journalbeatConfig = `journalbeat.inputs:\\n- paths: []\\n  #backoff: 1s\\n  #max_backoff: 20s\\n  seek: cursor\\n  #cursor_seek_fallback: head\\n  #include_matches: []\\n  #fields:\\n\\n#journalbeat:\\n  #registry_file: registry\\n\\nsetup.template.settings:\\n  index.number_of_shards: 1\\n  #index.codec: best_compression\\n  #_source.enabled: false\\n\\n#name:\\n#tags: [\\\"service-X\\\", \\\"web-tier\\\"]\\n#fields:\\n\\n#setup.dashboards.enabled: false\\n#setup.dashboards.url:\\n\\nprocessors:\\n  - add_host_metadata: ~\\n  - add_cloud_metadata: ~  \\n  - decode_json_fields:\\n      fields: [\\\"message\\\"]\\n      process_array: true\\n      max_depth: 8\\n      target: \\\"\\\"\\n\\n#logging.level: debug\\n#logging.selectors: [\\\"*\\\"]\\n\\n#monitoring.enabled: false\\n#monitoring.cluster_uuid:\\n#monitoring.elasticsearch:\\n\\n#migration.6_to_7.enabled: true\\n`;\\n        if (journalbeat.kibanaHost) {\\n            journalbeatConfig += `\\nsetup.kibana:\\n  host: \\\"${journalbeat.kibanaHost}\\\"\\n`;\\n        }\\n        let configured = 0;\\n        if (journalbeat.elastic.hosts.length) {\\n            configured++;\\n            journalbeatConfig += `\\noutput.elasticsearch:\\n  hosts: ${JSON.stringify(journalbeat.elastic.hosts)}\\n  #protocol: \\\"https\\\"\\n  username: ${JSON.stringify(journalbeat.elastic.username)}\\n  password: ${JSON.stringify(journalbeat.elastic.password)}\\n`;\\n        }\\n        if (journalbeat.logstashHosts.length) {\\n            if (configured) {\\n                console.log('Skipping logstash config in favor of elasticsearch');\\n            }\\n            else {\\n                configured++;\\n                journalbeatConfig += `\\noutput.logstash:\\n  hosts: ${JSON.stringify(journalbeat.logstashHosts)}\\n  #ssl.certificate_authorities: [\\\"/etc/pki/root/ca.pem\\\"]\\n  #ssl.certificate: \\\"/etc/pki/client/cert.pem\\\"\\n  #ssl.key: \\\"/etc/pki/client/cert.key\\\"\\n`;\\n            }\\n        }\\n        if (!configured)\\n            console.log('Warning: No journalbeat outputs configured');\\n        const change = yield fs_1.ensureFileIs('/etc/journalbeat/journalbeat.yml', journalbeatConfig);\\n        yield reload;\\n        yield spawn_1.exec(`systemctl ${change ? 'restart' : 'start'} journalbeat`);\\n    });\\n}\\nexports.setupJournalbeat = setupJournalbeat;\\n\",\"module.exports = require(\\\"os\\\");\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst Nginx_1 = require(\\\"./setup/Nginx\\\");\\nconst MainServiceFiles_1 = require(\\\"./setup/MainServiceFiles\\\");\\nconst MonitoringTools_1 = require(\\\"./setup/MonitoringTools\\\");\\n// import { setupDevTools } from './setup/DeveloperTools';\\nconst basicServer_1 = require(\\\"./setup/basicServer\\\");\\nconst printOSInfo_1 = require(\\\"../utils/printOSInfo\\\");\\nfunction prepare() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        // Initial smoke test\\n        yield printOSInfo_1.printOSInfo();\\n        yield basicServer_1.basicServerSetup();\\n        yield Promise.all([\\n            MonitoringTools_1.setupMonitoringTools(),\\n            // setupDevTools(),\\n            Nginx_1.setupNginx(),\\n            MainServiceFiles_1.setupMainServiceFiles(),\\n        ]);\\n        console.log('Server configured!');\\n    });\\n}\\nexports.prepare = prepare;\\nif (!module.parent) {\\n    prepare().catch(e => {\\n        console.log('Error running!');\\n        console.log(e);\\n        process.exitCode = 1;\\n    });\\n}\\n\",\"module.exports = require(\\\"child_process\\\");\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst Journalbeat_1 = require(\\\"./MonitorTools/Journalbeat\\\");\\nconst Netdata_1 = require(\\\"./MonitorTools/Netdata\\\");\\nconst Cockpit_1 = require(\\\"./MonitorTools/Cockpit\\\");\\nconst FailureNotificationServices_1 = require(\\\"./MonitorTools/FailureNotificationServices\\\");\\nconst PersistentJournal_1 = require(\\\"./MonitorTools/PersistentJournal\\\");\\nfunction setupMonitoringTools() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        yield Promise.all([\\n            Journalbeat_1.setupJournalbeat(),\\n            Netdata_1.setupNetdata(),\\n            Cockpit_1.setupCockpit(),\\n            FailureNotificationServices_1.setupFailureNotificationService(),\\n            PersistentJournal_1.setupPersistentJournal(),\\n        ]);\\n    });\\n}\\nexports.setupMonitoringTools = setupMonitoringTools;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nfunction setupFailureNotificationService() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        // TODO: Fill out\\n        // Ruby Service\\n        // https://github.com/joonty/systemd_mon\\n        // Manually with Systemd\\n        // https://serverfault.com/questions/694818/get-notification-when-systemd-monitored-service-enters-failed-state\\n    });\\n}\\nexports.setupFailureNotificationService = setupFailureNotificationService;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"../../utils/fs\\\");\\nconst spawn_1 = require(\\\"../../utils/spawn\\\");\\nconst readAvenConfig_1 = require(\\\"./readAvenConfig\\\");\\nconst deps = [];\\n// List of apt dependencies needed by various parts\\nfunction addAptDependencies(...dependencies) {\\n    deps.push(...dependencies);\\n}\\nexports.addAptDependencies = addAptDependencies;\\nfunction setupAptDependencies() {\\n    var _a, _b;\\n    return __awaiter(this, void 0, void 0, function* () {\\n        // TODO: Don't assume yarn\\n        yield spawn_1.exec('curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -');\\n        yield fs_1.ensureFileIs('/etc/apt/sources.list.d/yarn.list', 'deb https://dl.yarnpkg.com/debian/ stable main');\\n        addAptDependencies('yarn');\\n        yield spawn_1.spawn('apt-get', 'update');\\n        yield spawn_1.spawn('apt-get', 'upgrade', '-y');\\n        const config = yield readAvenConfig_1.readAvenConfig();\\n        addAptDependencies(...(_a = config.aptDependencies, (_a !== null && _a !== void 0 ? _a : [])));\\n        addAptDependencies(...(_b = config.runtimeAptDependencies, (_b !== null && _b !== void 0 ? _b : [])));\\n        // cSpell:ignore noninteractive autoremove confnew confdef confold dpkg\\n        const useNew = true;\\n        const dpkgForceConfOptions = useNew\\n            ? 'force-confnew'\\n            : 'force-confdef\\\\nforce-confold';\\n        yield fs_1.ensureFileIs('/etc/dpkg/dpkg.cfg.d/force-conf.cfg', `${dpkgForceConfOptions}\\\\n`);\\n        yield spawn_1.spawn('apt-get', \\n        // Avoid all interactive prompts https://serverfault.com/questions/227190\\n        {\\n            stdio: 'inherit',\\n            env: Object.assign(Object.assign({}, process.env), { DEBIAN_FRONTEND: 'noninteractive' }),\\n        }, 'install', '-yq', ...new Set(deps));\\n        yield spawn_1.spawn('apt-get', 'autoremove', '-y');\\n    });\\n}\\nexports.setupAptDependencies = setupAptDependencies;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"../../../utils/fs\\\");\\nfunction setupPersistentJournal() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        yield fs_1.mkdir('/var/log/journal');\\n    });\\n}\\nexports.setupPersistentJournal = setupPersistentJournal;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"fs\\\");\\nconst { readFile } = fs_1.promises;\\nfunction printOSInfo() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const release = (yield readFile('/etc/lsb-release')).toString();\\n        // cSpell:ignore DISTRIB\\n        /**\\n         * Sample /etc/lsb-release:\\n         * DISTRIB_ID=Ubuntu\\n         * DISTRIB_RELEASE=18.04\\n         * DISTRIB_CODENAME=bionic\\n         * DISTRIB_DESCRIPTION=\\\"Ubuntu 18.04.3 LTS\\\".\\n         */\\n        // Dirty get OS version\\n        const osVersion = release\\n            .split('\\\\n')[3]\\n            .split('=')[1]\\n            .split('\\\"')[1];\\n        console.log('OS Version', osVersion);\\n    });\\n}\\nexports.printOSInfo = printOSInfo;\\n\",\"\\\"use strict\\\";\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst child_process_1 = require(\\\"child_process\\\");\\nconst util_1 = require(\\\"util\\\");\\nconst io_1 = require(\\\"./io\\\");\\nconst defaultShell = '/bin/bash';\\nfunction spawn(command, first, ...args) {\\n    const defOpts = { stdio: 'inherit' };\\n    let opts;\\n    if (typeof first === 'string') {\\n        args.unshift(first);\\n        opts = defOpts;\\n    }\\n    else {\\n        if (first === true) {\\n            opts = Object.assign(Object.assign({}, defOpts), { shell: defaultShell });\\n        }\\n        else {\\n            opts = Object.assign(Object.assign({}, defOpts), first);\\n        }\\n    }\\n    io_1.debug('Spawning', command, args);\\n    const proc = child_process_1.spawn(command, args, opts);\\n    const ret = new Promise((resolve, reject) => {\\n        proc.on('exit', exitCode => {\\n            if (exitCode) {\\n                const e = new Error(`Exit code: ${exitCode}`);\\n                e.exitCode = exitCode;\\n                reject(e);\\n            }\\n            else {\\n                resolve();\\n            }\\n        });\\n    });\\n    ret.child = proc;\\n    return ret;\\n}\\nexports.spawn = spawn;\\nconst execP = util_1.promisify(child_process_1.exec);\\n/**\\n * Run a command and capture output.\\n *\\n * Prints nothing.\\n *\\n * - Shell\\n * - Captured & Buffered output\\n * - Promised result.\\n *\\n * @param {string} command - The command to run.\\n * @param {true|string} shell - Should we use a shell. Default true.\\n * @returns {ChildProcess} The child.\\n */\\nfunction exec(command, shell = true) {\\n    io_1.debug('Exec:', command);\\n    if (shell === null) {\\n        return execP(command);\\n    }\\n    if (shell === true)\\n        shell = defaultShell;\\n    return execP(command, { shell });\\n}\\nexports.exec = exec;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"../../utils/fs\\\");\\nconst spawn_1 = require(\\\"../../utils/spawn\\\");\\nfunction setupSecurity() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        // Disable password authentication on sshd\\n        const changed = yield fs_1.ensureFileContains('/etc/ssh/sshd_config', '\\\\nPasswordAuthentication no\\\\n');\\n        if (changed) {\\n            yield spawn_1.exec('systemctl reload sshd');\\n        }\\n    });\\n}\\nexports.setupSecurity = setupSecurity;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst Timezone_1 = require(\\\"./Timezone\\\");\\nconst aptDependencies_1 = require(\\\"./aptDependencies\\\");\\nconst Security_1 = require(\\\"./Security\\\");\\nconst readAvenConfig_1 = require(\\\"./readAvenConfig\\\");\\nconst Root_1 = require(\\\"./Root\\\");\\nfunction basicServerSetup() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        yield Promise.all([\\n            Security_1.setupSecurity(),\\n            readAvenConfig_1.readAvenConfig()\\n                .then(c => c.authorizedKeys)\\n                .then((keys) => __awaiter(this, void 0, void 0, function* () {\\n                if (keys.length)\\n                    return Root_1.setAuthorizedKeys('root', keys);\\n            })),\\n            Timezone_1.setupTimezone(),\\n        ]);\\n        yield aptDependencies_1.setupAptDependencies();\\n    });\\n}\\nexports.basicServerSetup = basicServerSetup;\\n\",\"\\\"use strict\\\";\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\\n    result[\\\"default\\\"] = mod;\\n    return result;\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst os = __importStar(require(\\\"os\\\"));\\n/**\\n * Commands\\n *\\n * Command Format:\\n *   ::name key=value,key=value::message\\n *\\n * Examples:\\n *   ::warning::This is the message\\n *   ::set-env name=MY_VAR::some value\\n */\\nfunction issueCommand(command, properties, message) {\\n    const cmd = new Command(command, properties, message);\\n    process.stdout.write(cmd.toString() + os.EOL);\\n}\\nexports.issueCommand = issueCommand;\\nfunction issue(name, message = '') {\\n    issueCommand(name, {}, message);\\n}\\nexports.issue = issue;\\nconst CMD_STRING = '::';\\nclass Command {\\n    constructor(command, properties, message) {\\n        if (!command) {\\n            command = 'missing.command';\\n        }\\n        this.command = command;\\n        this.properties = properties;\\n        this.message = message;\\n    }\\n    toString() {\\n        let cmdStr = CMD_STRING + this.command;\\n        if (this.properties && Object.keys(this.properties).length > 0) {\\n            cmdStr += ' ';\\n            let first = true;\\n            for (const key in this.properties) {\\n                if (this.properties.hasOwnProperty(key)) {\\n                    const val = this.properties[key];\\n                    if (val) {\\n                        if (first) {\\n                            first = false;\\n                        }\\n                        else {\\n                            cmdStr += ',';\\n                        }\\n                        cmdStr += `${key}=${escapeProperty(val)}`;\\n                    }\\n                }\\n            }\\n        }\\n        cmdStr += `${CMD_STRING}${escapeData(this.message)}`;\\n        return cmdStr;\\n    }\\n}\\nfunction escapeData(s) {\\n    return (s || '')\\n        .replace(/%/g, '%25')\\n        .replace(/\\\\r/g, '%0D')\\n        .replace(/\\\\n/g, '%0A');\\n}\\nfunction escapeProperty(s) {\\n    return (s || '')\\n        .replace(/%/g, '%25')\\n        .replace(/\\\\r/g, '%0D')\\n        .replace(/\\\\n/g, '%0A')\\n        .replace(/:/g, '%3A')\\n        .replace(/,/g, '%2C');\\n}\\n//# sourceMappingURL=command.js.map\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst spawn_1 = require(\\\"../../utils/spawn\\\");\\nconst fs_1 = require(\\\"../../utils/fs\\\");\\nconst readAvenConfig_1 = require(\\\"./readAvenConfig\\\");\\nfunction setupMainServiceFiles() {\\n    var _a;\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const { service } = yield readAvenConfig_1.readAvenConfig();\\n        const serviceName = service.name;\\n        const serviceDescription = (_a = service.description, (_a !== null && _a !== void 0 ? _a : 'Runtime server'));\\n        const startServerCommand = service.startServerCommand;\\n        const extraService = service.extraConfigs;\\n        const serviceFile = `/etc/systemd/system/${serviceName}.service`;\\n        const HomeDir = `/var/lib/${serviceName}`;\\n        const runtimeUser = 'www-data';\\n        const runtimeUid = spawn_1.exec(`id -u ${runtimeUser}`);\\n        const runtimeGid = spawn_1.exec(`id -g ${runtimeUser}`);\\n        const dir1 = fs_1.mkdir(`${serviceFile}.d`);\\n        const dir2 = fs_1.mkdir(`/opt/aven`);\\n        const dir3 = fs_1.mkdir(HomeDir).then(() => __awaiter(this, void 0, void 0, function* () {\\n            return yield Promise.all([\\n                fs_1.chmod(HomeDir, 0o700),\\n                fs_1.chown(HomeDir, Number((yield runtimeUid).stdout), Number((yield runtimeGid).stdout)),\\n            ]);\\n        }));\\n        const serviceFileContents = `[Unit]\\nDescription=${serviceDescription}\\nAfter=network.target\\n\\n[Service]\\nType=simple\\nEnvironment=LISTEN_PATH=\\\"/run/${serviceName}/sock\\\"\\nRuntimeDirectory=${serviceName}\\nWorkingDirectory=/opt/aven/${serviceName}\\nExecStart=${startServerCommand}\\nEnvironment=HOME=\\\"${HomeDir}\\\"\\nUser=${runtimeUser}\\n${extraService ? `\\\\n${extraService}\\\\n` : '\\\\n'}\\n[Install]\\nWantedBy=default.target\\n  `;\\n        yield fs_1.ensureFileIs(serviceFile, serviceFileContents);\\n        // Tell systemd to read our changes\\n        yield spawn_1.exec(`systemctl daemon-reload`);\\n        // Run service on server boot\\n        yield spawn_1.exec(`systemctl enable ${serviceName}.service`);\\n        yield Promise.all([dir1, dir2, dir3]);\\n    });\\n}\\nexports.setupMainServiceFiles = setupMainServiceFiles;\\n\",\"\\\"use strict\\\";\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst io_1 = require(\\\"../../utils/io\\\");\\nlet done;\\nlet error;\\nconst config = new Promise((resolve, reject) => {\\n    done = resolve;\\n    error = reject;\\n});\\nlet data = '';\\nprocess.stdin.on('data', d => {\\n    data += d;\\n});\\nconst timeout = setTimeout(() => {\\n    error(new Error('Timeout reading json input'));\\n}, 1000);\\nprocess.stdin.on('end', () => {\\n    clearTimeout(timeout);\\n    const parsed = JSON.parse(data);\\n    io_1.debug('Using aven config:', parsed);\\n    // TODO: Sanitize object?\\n    done(parsed);\\n});\\nfunction readAvenConfig() {\\n    return config;\\n}\\nexports.readAvenConfig = readAvenConfig;\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\\n    result[\\\"default\\\"] = mod;\\n    return result;\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst command_1 = require(\\\"./command\\\");\\nconst os = __importStar(require(\\\"os\\\"));\\nconst path = __importStar(require(\\\"path\\\"));\\n/**\\n * The code to exit an action\\n */\\nvar ExitCode;\\n(function (ExitCode) {\\n    /**\\n     * A code indicating that the action was successful\\n     */\\n    ExitCode[ExitCode[\\\"Success\\\"] = 0] = \\\"Success\\\";\\n    /**\\n     * A code indicating that the action was a failure\\n     */\\n    ExitCode[ExitCode[\\\"Failure\\\"] = 1] = \\\"Failure\\\";\\n})(ExitCode = exports.ExitCode || (exports.ExitCode = {}));\\n//-----------------------------------------------------------------------\\n// Variables\\n//-----------------------------------------------------------------------\\n/**\\n * Sets env variable for this action and future actions in the job\\n * @param name the name of the variable to set\\n * @param val the value of the variable\\n */\\nfunction exportVariable(name, val) {\\n    process.env[name] = val;\\n    command_1.issueCommand('set-env', { name }, val);\\n}\\nexports.exportVariable = exportVariable;\\n/**\\n * Registers a secret which will get masked from logs\\n * @param secret value of the secret\\n */\\nfunction setSecret(secret) {\\n    command_1.issueCommand('add-mask', {}, secret);\\n}\\nexports.setSecret = setSecret;\\n/**\\n * Prepends inputPath to the PATH (for this action and future actions)\\n * @param inputPath\\n */\\nfunction addPath(inputPath) {\\n    command_1.issueCommand('add-path', {}, inputPath);\\n    process.env['PATH'] = `${inputPath}${path.delimiter}${process.env['PATH']}`;\\n}\\nexports.addPath = addPath;\\n/**\\n * Gets the value of an input.  The value is also trimmed.\\n *\\n * @param     name     name of the input to get\\n * @param     options  optional. See InputOptions.\\n * @returns   string\\n */\\nfunction getInput(name, options) {\\n    const val = process.env[`INPUT_${name.replace(/ /g, '_').toUpperCase()}`] || '';\\n    if (options && options.required && !val) {\\n        throw new Error(`Input required and not supplied: ${name}`);\\n    }\\n    return val.trim();\\n}\\nexports.getInput = getInput;\\n/**\\n * Sets the value of an output.\\n *\\n * @param     name     name of the output to set\\n * @param     value    value to store\\n */\\nfunction setOutput(name, value) {\\n    command_1.issueCommand('set-output', { name }, value);\\n}\\nexports.setOutput = setOutput;\\n//-----------------------------------------------------------------------\\n// Results\\n//-----------------------------------------------------------------------\\n/**\\n * Sets the action status to failed.\\n * When the action exits it will be with an exit code of 1\\n * @param message add error issue message\\n */\\nfunction setFailed(message) {\\n    process.exitCode = ExitCode.Failure;\\n    error(message);\\n}\\nexports.setFailed = setFailed;\\n//-----------------------------------------------------------------------\\n// Logging Commands\\n//-----------------------------------------------------------------------\\n/**\\n * Writes debug message to user log\\n * @param message debug message\\n */\\nfunction debug(message) {\\n    command_1.issueCommand('debug', {}, message);\\n}\\nexports.debug = debug;\\n/**\\n * Adds an error issue\\n * @param message error issue message\\n */\\nfunction error(message) {\\n    command_1.issue('error', message);\\n}\\nexports.error = error;\\n/**\\n * Adds an warning issue\\n * @param message warning issue message\\n */\\nfunction warning(message) {\\n    command_1.issue('warning', message);\\n}\\nexports.warning = warning;\\n/**\\n * Writes info to log with console.log.\\n * @param message info message\\n */\\nfunction info(message) {\\n    process.stdout.write(message + os.EOL);\\n}\\nexports.info = info;\\n/**\\n * Begin an output group.\\n *\\n * Output until the next `groupEnd` will be foldable in this group\\n *\\n * @param name The name of the output group\\n */\\nfunction startGroup(name) {\\n    command_1.issue('group', name);\\n}\\nexports.startGroup = startGroup;\\n/**\\n * End an output group.\\n */\\nfunction endGroup() {\\n    command_1.issue('endgroup');\\n}\\nexports.endGroup = endGroup;\\n/**\\n * Wrap an asynchronous function call in a group.\\n *\\n * Returns the same type as the function itself.\\n *\\n * @param name The name of the group\\n * @param fn The function to wrap in the group\\n */\\nfunction group(name, fn) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        startGroup(name);\\n        let result;\\n        try {\\n            result = yield fn();\\n        }\\n        finally {\\n            endGroup();\\n        }\\n        return result;\\n    });\\n}\\nexports.group = group;\\n//-----------------------------------------------------------------------\\n// Wrapper action state\\n//-----------------------------------------------------------------------\\n/**\\n * Saves state for current action, the state can only be retrieved by this action's post job execution.\\n *\\n * @param     name     name of the state to store\\n * @param     value    value to store\\n */\\nfunction saveState(name, value) {\\n    command_1.issueCommand('save-state', { name }, value);\\n}\\nexports.saveState = saveState;\\n/**\\n * Gets the value of an state set by this action's main execution.\\n *\\n * @param     name     name of the state to get\\n * @returns   string\\n */\\nfunction getState(name) {\\n    return process.env[`STATE_${name}`] || '';\\n}\\nexports.getState = getState;\\n//# sourceMappingURL=core.js.map\",\"module.exports = require(\\\"path\\\");\",\"module.exports = require(\\\"util\\\");\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst fs_1 = require(\\\"../../utils/fs\\\");\\nconst User_1 = require(\\\"../../utils/User\\\");\\nconst path_1 = require(\\\"path\\\");\\nfunction setAuthorizedKeys(user, keys) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const userDir = yield User_1.userHome(user);\\n        const sshConfDir = path_1.join(userDir, '.ssh');\\n        yield fs_1.mkdir(sshConfDir);\\n        yield fs_1.ensureFileIs(path_1.join(sshConfDir, 'authorized_keys'), [...keys, ''].join('\\\\n'));\\n    });\\n}\\nexports.setAuthorizedKeys = setAuthorizedKeys;\\n/**\\n * Configure root user settings.\\n *\\n * @param {string[]} sources - List of URLs to load developer keys from.\\n */\\nfunction setupRoot(sources) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const userDir = yield User_1.userHome('root');\\n        const sshConfDir = path_1.join(userDir, '.ssh');\\n        yield fs_1.mkdir(sshConfDir);\\n        if (!sources)\\n            sources = [];\\n        yield Promise.all([\\n            // Make it easy for root user to clone from github\\n            User_1.fixKnownHosts(userDir),\\n            setAuthorizedKeys('root', (sources !== null && sources !== void 0 ? sources : [])),\\n        ]);\\n    });\\n}\\nexports.setupRoot = setupRoot;\\n\",\"module.exports = require(\\\"fs\\\");\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst path_1 = require(\\\"path\\\");\\nconst fs_1 = require(\\\"./fs\\\");\\nconst spawn_1 = require(\\\"./spawn\\\");\\nconst userGroups = ['sudo', 'adm', 'systemd-journal'];\\nconst UsernameInUseUserAddExitValue = 9;\\nfunction userHome(name) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        // TODO: Read from os\\n        return name === 'root' ? '/root' : `/home/${name}`;\\n    });\\n}\\nexports.userHome = userHome;\\n/**\\n * Create a new user and setup home dir.\\n *\\n * @param {string} name - Username to make.\\n */\\nfunction createAndConfigureUser(name) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        const command = [];\\n        // cSpell:ignore useradd\\n        command.push('useradd');\\n        // Don't use a group with same name as user (use \\\"users\\\" instead)\\n        command.push('--no-user-group');\\n        command.push('--gid', 'users');\\n        command.push('--shell', '/bin/bash');\\n        // Create home directory for user\\n        command.push('--create-home');\\n        // Default list of groups\\n        command.push('--groups', userGroups.join(','));\\n        // Username we're making\\n        command.push(name);\\n        yield spawn_1.exec(command.join(' ')).catch(e => {\\n            if (e.code !== UsernameInUseUserAddExitValue)\\n                throw e;\\n            console.log(`User ${name} exists`);\\n            // cSpell:ignore usermod\\n            // TODO: `usermod` to make sure user options are consistent (in case they change)\\n        });\\n        const home = yield userHome(name);\\n        yield fs_1.mkdir(`${home}/.ssh`);\\n        yield fixKnownHosts(home);\\n    });\\n}\\nexports.createAndConfigureUser = createAndConfigureUser;\\nfunction ensureKey(user, key) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        yield fs_1.ensureFileContains(`${yield userHome(user)}/.ssh/authorized_keys`, key);\\n    });\\n}\\nexports.ensureKey = ensureKey;\\nconst GitHubKnownHosts = 'github.com ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq2A7hRGmdnm9tUDbO9IDSwBK6TbQa+PXYPCPy6rbTrTtw7PHkccKrpp0yVhp5HdEIcKr6pLlVDBfOLX9QUsyCOV0wzfjIJNlGEYsdlLJizHhbn2mUjvSAHQqZETYP81eFzLQNnPHt4EVVUh7VfDESU84KezmD5QlWpXLmvU31/yMf+Se8xhHTvKSCZIFImWwoG6mbUoWf9nzpIoaSjB+weqqUUmpaaasXVal72J+UX2B+2RPW3RcT0eOzQgqlJL3RKrTJvdsjE3JEAvGq3lGHSZXy28G3skua2SmVi/w4yCE6gbODqnTWlg7+wC604ydGXA8VJiS5ap43JXiUFFAaQ==';\\nfunction fixKnownHosts(userDir) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        return fs_1.ensureFileContains(path_1.join(userDir, '.ssh', 'known_hosts'), GitHubKnownHosts);\\n    });\\n}\\nexports.fixKnownHosts = fixKnownHosts;\\n\",\"\\\"use strict\\\";\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.isGitHubAction = process.env.GITHUB_ACTIONS === 'true' ||\\n    process.argv.includes('--gh-actions');\\n\",\"\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst aptDependencies_1 = require(\\\"../aptDependencies\\\");\\naptDependencies_1.addAptDependencies('cockpit');\\nfunction setupCockpit() {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        // TODO: Setup user password\\n        // TODO: configure to work with nginx?\\n    });\\n}\\nexports.setupCockpit = setupCockpit;\\n\",\"__webpack_require__.nmd = function(module) {\\n\\tmodule.paths = [];\\n\\tif (!module.children) module.children = [];\\n\\tObject.defineProperty(module, 'loaded', {\\n\\t\\tenumerable: true,\\n\\t\\tget: function() { return module.l; }\\n\\t});\\n\\tObject.defineProperty(module, 'id', {\\n\\t\\tenumerable: true,\\n\\t\\tget: function() { return module.i; }\\n\\t});\\n\\treturn module;\\n};\"]}"