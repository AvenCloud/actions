require('./sourcemap-register.js');module.exports=function(e,t){"use strict";var n={};function __webpack_require__(t){if(n[t]){return n[t].exports}var r=n[t]={i:t,l:false,exports:{}};e[t].call(r.exports,r,r.exports,__webpack_require__);r.l=true;return r.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(588)}t(__webpack_require__);return startup()}({1:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=n(129);const s=n(622);const o=n(669);const c=n(672);const a=o.promisify(i.exec);function cp(e,t,n={}){return r(this,void 0,void 0,function*(){const{force:r,recursive:i}=readCopyOptions(n);const o=(yield c.exists(t))?yield c.stat(t):null;if(o&&o.isFile()&&!r){return}const a=o&&o.isDirectory()?s.join(t,s.basename(e)):t;if(!(yield c.exists(e))){throw new Error(`no such file or directory: ${e}`)}const u=yield c.stat(e);if(u.isDirectory()){if(!i){throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`)}else{yield cpDirRecursive(e,a,0,r)}}else{if(s.relative(e,a)===""){throw new Error(`'${a}' and '${e}' are the same file`)}yield copyFile(e,a,r)}})}t.cp=cp;function mv(e,t,n={}){return r(this,void 0,void 0,function*(){if(yield c.exists(t)){let r=true;if(yield c.isDirectory(t)){t=s.join(t,s.basename(e));r=yield c.exists(t)}if(r){if(n.force==null||n.force){yield rmRF(t)}else{throw new Error("Destination already exists")}}}yield mkdirP(s.dirname(t));yield c.rename(e,t)})}t.mv=mv;function rmRF(e){return r(this,void 0,void 0,function*(){if(c.IS_WINDOWS){try{if(yield c.isDirectory(e,true)){yield a(`rd /s /q "${e}"`)}else{yield a(`del /f /a "${e}"`)}}catch(e){if(e.code!=="ENOENT")throw e}try{yield c.unlink(e)}catch(e){if(e.code!=="ENOENT")throw e}}else{let t=false;try{t=yield c.isDirectory(e)}catch(e){if(e.code!=="ENOENT")throw e;return}if(t){yield a(`rm -rf "${e}"`)}else{yield c.unlink(e)}}})}t.rmRF=rmRF;function mkdirP(e){return r(this,void 0,void 0,function*(){yield c.mkdirP(e)})}t.mkdirP=mkdirP;function which(e,t){return r(this,void 0,void 0,function*(){if(!e){throw new Error("parameter 'tool' is required")}if(t){const t=yield which(e,false);if(!t){if(c.IS_WINDOWS){throw new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`)}else{throw new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`)}}}try{const t=[];if(c.IS_WINDOWS&&process.env.PATHEXT){for(const e of process.env.PATHEXT.split(s.delimiter)){if(e){t.push(e)}}}if(c.isRooted(e)){const n=yield c.tryGetExecutablePath(e,t);if(n){return n}return""}if(e.includes("/")||c.IS_WINDOWS&&e.includes("\\")){return""}const n=[];if(process.env.PATH){for(const e of process.env.PATH.split(s.delimiter)){if(e){n.push(e)}}}for(const r of n){const n=yield c.tryGetExecutablePath(r+s.sep+e,t);if(n){return n}}return""}catch(e){throw new Error(`which failed with message ${e.message}`)}})}t.which=which;function readCopyOptions(e){const t=e.force==null?true:e.force;const n=Boolean(e.recursive);return{force:t,recursive:n}}function cpDirRecursive(e,t,n,i){return r(this,void 0,void 0,function*(){if(n>=255)return;n++;yield mkdirP(t);const r=yield c.readdir(e);for(const s of r){const r=`${e}/${s}`;const o=`${t}/${s}`;const a=yield c.lstat(r);if(a.isDirectory()){yield cpDirRecursive(r,o,n,i)}else{yield copyFile(r,o,i)}}yield c.chmod(t,(yield c.stat(e)).mode)})}function copyFile(e,t,n){return r(this,void 0,void 0,function*(){if((yield c.lstat(e)).isSymbolicLink()){try{yield c.lstat(t);yield c.unlink(t)}catch(e){if(e.code==="EPERM"){yield c.chmod(t,"0666");yield c.unlink(t)}}const n=yield c.readlink(e);yield c.symlink(n,t,c.IS_WINDOWS?"junction":null)}else if(!(yield c.exists(t))||n){yield c.copyFile(e,t)}})}},9:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=n(87);const s=n(614);const o=n(129);const c=n(622);const a=n(1);const u=n(672);const l=process.platform==="win32";class ToolRunner extends s.EventEmitter{constructor(e,t,n){super();if(!e){throw new Error("Parameter 'toolPath' cannot be null or empty.")}this.toolPath=e;this.args=t||[];this.options=n||{}}_debug(e){if(this.options.listeners&&this.options.listeners.debug){this.options.listeners.debug(e)}}_getCommandString(e,t){const n=this._getSpawnFileName();const r=this._getSpawnArgs(e);let i=t?"":"[command]";if(l){if(this._isCmdFile()){i+=n;for(const e of r){i+=` ${e}`}}else if(e.windowsVerbatimArguments){i+=`"${n}"`;for(const e of r){i+=` ${e}`}}else{i+=this._windowsQuoteCmdArg(n);for(const e of r){i+=` ${this._windowsQuoteCmdArg(e)}`}}}else{i+=n;for(const e of r){i+=` ${e}`}}return i}_processLineBuffer(e,t,n){try{let r=t+e.toString();let s=r.indexOf(i.EOL);while(s>-1){const e=r.substring(0,s);n(e);r=r.substring(s+i.EOL.length);s=r.indexOf(i.EOL)}t=r}catch(e){this._debug(`error processing line. Failed with error ${e}`)}}_getSpawnFileName(){if(l){if(this._isCmdFile()){return process.env["COMSPEC"]||"cmd.exe"}}return this.toolPath}_getSpawnArgs(e){if(l){if(this._isCmdFile()){let t=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const n of this.args){t+=" ";t+=e.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n)}t+='"';return[t]}}return this.args}_endsWith(e,t){return e.endsWith(t)}_isCmdFile(){const e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile()){return this._uvQuoteCmdArg(e)}if(!e){return'""'}const t=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let n=false;for(const r of e){if(t.some(e=>e===r)){n=true;break}}if(!n){return e}let r='"';let i=true;for(let t=e.length;t>0;t--){r+=e[t-1];if(i&&e[t-1]==="\\"){r+="\\"}else if(e[t-1]==='"'){i=true;r+='"'}else{i=false}}r+='"';return r.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e){return'""'}if(!e.includes(" ")&&!e.includes("\t")&&!e.includes('"')){return e}if(!e.includes('"')&&!e.includes("\\")){return`"${e}"`}let t='"';let n=true;for(let r=e.length;r>0;r--){t+=e[r-1];if(n&&e[r-1]==="\\"){t+="\\"}else if(e[r-1]==='"'){n=true;t+="\\"}else{n=false}}t+='"';return t.split("").reverse().join("")}_cloneExecOptions(e){e=e||{};const t={cwd:e.cwd||process.cwd(),env:e.env||process.env,silent:e.silent||false,windowsVerbatimArguments:e.windowsVerbatimArguments||false,failOnStdErr:e.failOnStdErr||false,ignoreReturnCode:e.ignoreReturnCode||false,delay:e.delay||1e4};t.outStream=e.outStream||process.stdout;t.errStream=e.errStream||process.stderr;return t}_getSpawnOptions(e,t){e=e||{};const n={};n.cwd=e.cwd;n.env=e.env;n["windowsVerbatimArguments"]=e.windowsVerbatimArguments||this._isCmdFile();if(e.windowsVerbatimArguments){n.argv0=`"${t}"`}return n}exec(){return r(this,void 0,void 0,function*(){if(!u.isRooted(this.toolPath)&&(this.toolPath.includes("/")||l&&this.toolPath.includes("\\"))){this.toolPath=c.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)}this.toolPath=yield a.which(this.toolPath,true);return new Promise((e,t)=>{this._debug(`exec tool: ${this.toolPath}`);this._debug("arguments:");for(const e of this.args){this._debug(`   ${e}`)}const n=this._cloneExecOptions(this.options);if(!n.silent&&n.outStream){n.outStream.write(this._getCommandString(n)+i.EOL)}const r=new ExecState(n,this.toolPath);r.on("debug",e=>{this._debug(e)});const s=this._getSpawnFileName();const c=o.spawn(s,this._getSpawnArgs(n),this._getSpawnOptions(this.options,s));const a="";if(c.stdout){c.stdout.on("data",e=>{if(this.options.listeners&&this.options.listeners.stdout){this.options.listeners.stdout(e)}if(!n.silent&&n.outStream){n.outStream.write(e)}this._processLineBuffer(e,a,e=>{if(this.options.listeners&&this.options.listeners.stdline){this.options.listeners.stdline(e)}})})}const u="";if(c.stderr){c.stderr.on("data",e=>{r.processStderr=true;if(this.options.listeners&&this.options.listeners.stderr){this.options.listeners.stderr(e)}if(!n.silent&&n.errStream&&n.outStream){const t=n.failOnStdErr?n.errStream:n.outStream;t.write(e)}this._processLineBuffer(e,u,e=>{if(this.options.listeners&&this.options.listeners.errline){this.options.listeners.errline(e)}})})}c.on("error",e=>{r.processError=e.message;r.processExited=true;r.processClosed=true;r.CheckComplete()});c.on("exit",e=>{r.processExitCode=e;r.processExited=true;this._debug(`Exit code ${e} received from tool '${this.toolPath}'`);r.CheckComplete()});c.on("close",e=>{r.processExitCode=e;r.processExited=true;r.processClosed=true;this._debug(`STDIO streams have closed for tool '${this.toolPath}'`);r.CheckComplete()});r.on("done",(n,r)=>{if(a.length>0){this.emit("stdline",a)}if(u.length>0){this.emit("errline",u)}c.removeAllListeners();if(n){t(n)}else{e(r)}})})})}}t.ToolRunner=ToolRunner;function argStringToArray(e){const t=[];let n=false;let r=false;let i="";function append(e){if(r&&e!=='"'){i+="\\"}i+=e;r=false}for(let s=0;s<e.length;s++){const o=e.charAt(s);if(o==='"'){if(!r){n=!n}else{append(o)}continue}if(o==="\\"&&r){append(o);continue}if(o==="\\"&&n){r=true;continue}if(o===" "&&!n){if(i.length>0){t.push(i);i=""}continue}append(o)}if(i.length>0){t.push(i.trim())}return t}t.argStringToArray=argStringToArray;class ExecState extends s.EventEmitter{constructor(e,t){super();this.processClosed=false;this.processError="";this.processExitCode=0;this.processExited=false;this.processStderr=false;this.delay=1e4;this.done=false;this.timeout=null;if(!t){throw new Error("toolPath must not be empty")}this.options=e;this.toolPath=t;if(e.delay){this.delay=e.delay}}CheckComplete(){if(this.done){return}if(this.processClosed){this._setResult()}else if(this.processExited){this.timeout=setTimeout(ExecState.HandleTimeout,this.delay,this)}}_debug(e){this.emit("debug",e)}_setResult(){let e;if(this.processExited){if(this.processError){e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`)}else if(this.processExitCode!==0&&!this.options.ignoreReturnCode){e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)}else if(this.processStderr&&this.options.failOnStdErr){e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)}}if(this.timeout){clearTimeout(this.timeout);this.timeout=null}this.done=true;this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(e.done){return}if(!e.processClosed&&e.processExited){const t=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(t)}e._setResult()}}},16:function(e){e.exports=require("tls")},87:function(e){e.exports=require("os")},129:function(e){e.exports=require("child_process")},139:function(e,t,n){var r=n(417);e.exports=function nodeRNG(){return r.randomBytes(16)}},141:function(e,t,n){"use strict";var r=n(631);var i=n(16);var s=n(605);var o=n(211);var c=n(614);var a=n(357);var u=n(669);t.httpOverHttp=httpOverHttp;t.httpsOverHttp=httpsOverHttp;t.httpOverHttps=httpOverHttps;t.httpsOverHttps=httpsOverHttps;function httpOverHttp(e){var t=new TunnelingAgent(e);t.request=s.request;return t}function httpsOverHttp(e){var t=new TunnelingAgent(e);t.request=s.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function httpOverHttps(e){var t=new TunnelingAgent(e);t.request=o.request;return t}function httpsOverHttps(e){var t=new TunnelingAgent(e);t.request=o.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function TunnelingAgent(e){var t=this;t.options=e||{};t.proxyOptions=t.options.proxy||{};t.maxSockets=t.options.maxSockets||s.Agent.defaultMaxSockets;t.requests=[];t.sockets=[];t.on("free",function onFree(e,n,r,i){var s=toOptions(n,r,i);for(var o=0,c=t.requests.length;o<c;++o){var a=t.requests[o];if(a.host===s.host&&a.port===s.port){t.requests.splice(o,1);a.request.onSocket(e);return}}e.destroy();t.removeSocket(e)})}u.inherits(TunnelingAgent,c.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(e,t,n,r){var i=this;var s=mergeOptions({request:e},i.options,toOptions(t,n,r));if(i.sockets.length>=this.maxSockets){i.requests.push(s);return}i.createSocket(s,function(t){t.on("free",onFree);t.on("close",onCloseOrRemove);t.on("agentRemove",onCloseOrRemove);e.onSocket(t);function onFree(){i.emit("free",t,s)}function onCloseOrRemove(e){i.removeSocket(t);t.removeListener("free",onFree);t.removeListener("close",onCloseOrRemove);t.removeListener("agentRemove",onCloseOrRemove)}})};TunnelingAgent.prototype.createSocket=function createSocket(e,t){var n=this;var r={};n.sockets.push(r);var i=mergeOptions({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:false,headers:{host:e.host+":"+e.port}});if(e.localAddress){i.localAddress=e.localAddress}if(i.proxyAuth){i.headers=i.headers||{};i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")}l("making CONNECT request");var s=n.request(i);s.useChunkedEncodingByDefault=false;s.once("response",onResponse);s.once("upgrade",onUpgrade);s.once("connect",onConnect);s.once("error",onError);s.end();function onResponse(e){e.upgrade=true}function onUpgrade(e,t,n){process.nextTick(function(){onConnect(e,t,n)})}function onConnect(i,o,c){s.removeAllListeners();o.removeAllListeners();if(i.statusCode!==200){l("tunneling socket could not be established, statusCode=%d",i.statusCode);o.destroy();var a=new Error("tunneling socket could not be established, "+"statusCode="+i.statusCode);a.code="ECONNRESET";e.request.emit("error",a);n.removeSocket(r);return}if(c.length>0){l("got illegal response body from proxy");o.destroy();var a=new Error("got illegal response body from proxy");a.code="ECONNRESET";e.request.emit("error",a);n.removeSocket(r);return}l("tunneling connection has established");n.sockets[n.sockets.indexOf(r)]=o;return t(o)}function onError(t){s.removeAllListeners();l("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var i=new Error("tunneling socket could not be established, "+"cause="+t.message);i.code="ECONNRESET";e.request.emit("error",i);n.removeSocket(r)}};TunnelingAgent.prototype.removeSocket=function removeSocket(e){var t=this.sockets.indexOf(e);if(t===-1){return}this.sockets.splice(t,1);var n=this.requests.shift();if(n){this.createSocket(n,function(e){n.request.onSocket(e)})}};function createSecureSocket(e,t){var n=this;TunnelingAgent.prototype.createSocket.call(n,e,function(r){var s=e.request.getHeader("host");var o=mergeOptions({},n.options,{socket:r,servername:s?s.replace(/:.*$/,""):e.host});var c=i.connect(0,o);n.sockets[n.sockets.indexOf(r)]=c;t(c)})}function toOptions(e,t,n){if(typeof e==="string"){return{host:e,port:t,localAddress:n}}return e}function mergeOptions(e){for(var t=1,n=arguments.length;t<n;++t){var r=arguments[t];if(typeof r==="object"){var i=Object.keys(r);for(var s=0,o=i.length;s<o;++s){var c=i[s];if(r[c]!==undefined){e[c]=r[c]}}}}return e}var l;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){l=function(){var e=Array.prototype.slice.call(arguments);if(typeof e[0]==="string"){e[0]="TUNNEL: "+e[0]}else{e.unshift("TUNNEL:")}console.error.apply(console,e)}}else{l=function(){}}t.debug=l},211:function(e){e.exports=require("https")},226:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class BasicCredentialHandler{constructor(e,t){this.username=e;this.password=t}prepareRequest(e){e.headers["Authorization"]="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(e){return false}handleAuthentication(e,t,n){return null}}t.BasicCredentialHandler=BasicCredentialHandler;class BearerCredentialHandler{constructor(e){this.token=e}prepareRequest(e){e.headers["Authorization"]="Bearer "+this.token}canHandleAuthentication(e){return false}handleAuthentication(e,t,n){return null}}t.BearerCredentialHandler=BearerCredentialHandler;class PersonalAccessTokenCredentialHandler{constructor(e){this.token=e}prepareRequest(e){e.headers["Authorization"]="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(e){return false}handleAuthentication(e,t,n){return null}}t.PersonalAccessTokenCredentialHandler=PersonalAccessTokenCredentialHandler},357:function(e){e.exports=require("assert")},413:function(e,t,n){e.exports=n(141)},417:function(e){e.exports=require("crypto")},431:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(87));function issueCommand(e,t,n){const r=new Command(e,t,n);process.stdout.write(r.toString()+i.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const s="::";class Command{constructor(e,t,n){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=n}toString(){let e=s+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const n in this.properties){if(this.properties.hasOwnProperty(n)){const r=this.properties[n];if(r){if(t){t=false}else{e+=","}e+=`${n}=${escapeProperty(r)}`}}}}e+=`${s}${escapeData(this.message)}`;return e}}function escapeData(e){return(e||"").replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return(e||"").replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},470:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=n(431);const o=i(n(87));const c=i(n(622));var a;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(a=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){process.env[e]=t;s.issueCommand("set-env",{name:e},t)}t.exportVariable=exportVariable;function setSecret(e){s.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){s.issueCommand("add-path",{},e);process.env["PATH"]=`${e}${c.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n){throw new Error(`Input required and not supplied: ${e}`)}return n.trim()}t.getInput=getInput;function setOutput(e,t){s.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setFailed(e){process.exitCode=a.Failure;error(e)}t.setFailed=setFailed;function debug(e){s.issueCommand("debug",{},e)}t.debug=debug;function error(e){s.issue("error",e)}t.error=error;function warning(e){s.issue("warning",e)}t.warning=warning;function info(e){process.stdout.write(e+o.EOL)}t.info=info;function startGroup(e){s.issue("group",e)}t.startGroup=startGroup;function endGroup(){s.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return r(this,void 0,void 0,function*(){startGroup(e);let n;try{n=yield t()}finally{endGroup()}return n})}t.group=group;function saveState(e,t){s.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState},539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(835);const i=n(605);const s=n(211);const o=n(950);let c;var a;(function(e){e[e["OK"]=200]="OK";e[e["MultipleChoices"]=300]="MultipleChoices";e[e["MovedPermanently"]=301]="MovedPermanently";e[e["ResourceMoved"]=302]="ResourceMoved";e[e["SeeOther"]=303]="SeeOther";e[e["NotModified"]=304]="NotModified";e[e["UseProxy"]=305]="UseProxy";e[e["SwitchProxy"]=306]="SwitchProxy";e[e["TemporaryRedirect"]=307]="TemporaryRedirect";e[e["PermanentRedirect"]=308]="PermanentRedirect";e[e["BadRequest"]=400]="BadRequest";e[e["Unauthorized"]=401]="Unauthorized";e[e["PaymentRequired"]=402]="PaymentRequired";e[e["Forbidden"]=403]="Forbidden";e[e["NotFound"]=404]="NotFound";e[e["MethodNotAllowed"]=405]="MethodNotAllowed";e[e["NotAcceptable"]=406]="NotAcceptable";e[e["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";e[e["RequestTimeout"]=408]="RequestTimeout";e[e["Conflict"]=409]="Conflict";e[e["Gone"]=410]="Gone";e[e["TooManyRequests"]=429]="TooManyRequests";e[e["InternalServerError"]=500]="InternalServerError";e[e["NotImplemented"]=501]="NotImplemented";e[e["BadGateway"]=502]="BadGateway";e[e["ServiceUnavailable"]=503]="ServiceUnavailable";e[e["GatewayTimeout"]=504]="GatewayTimeout"})(a=t.HttpCodes||(t.HttpCodes={}));var u;(function(e){e["Accept"]="accept";e["ContentType"]="content-type"})(u=t.Headers||(t.Headers={}));var l;(function(e){e["ApplicationJson"]="application/json"})(l=t.MediaTypes||(t.MediaTypes={}));function getProxyUrl(e){let t=o.getProxyUrl(r.parse(e));return t?t.href:""}t.getProxyUrl=getProxyUrl;const d=[a.MovedPermanently,a.ResourceMoved,a.SeeOther,a.TemporaryRedirect,a.PermanentRedirect];const f=[a.BadGateway,a.ServiceUnavailable,a.GatewayTimeout];const p=["OPTIONS","GET","DELETE","HEAD"];const h=10;const v=5;class HttpClientResponse{constructor(e){this.message=e}readBody(){return new Promise(async(e,t)=>{let n=Buffer.alloc(0);this.message.on("data",e=>{n=Buffer.concat([n,e])});this.message.on("end",()=>{e(n.toString())})})}}t.HttpClientResponse=HttpClientResponse;function isHttps(e){let t=r.parse(e);return t.protocol==="https:"}t.isHttps=isHttps;class HttpClient{constructor(e,t,n){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=e;this.handlers=t||[];this.requestOptions=n;if(n){if(n.ignoreSslError!=null){this._ignoreSslError=n.ignoreSslError}this._socketTimeout=n.socketTimeout;if(n.allowRedirects!=null){this._allowRedirects=n.allowRedirects}if(n.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=n.allowRedirectDowngrade}if(n.maxRedirects!=null){this._maxRedirects=Math.max(n.maxRedirects,0)}if(n.keepAlive!=null){this._keepAlive=n.keepAlive}if(n.allowRetries!=null){this._allowRetries=n.allowRetries}if(n.maxRetries!=null){this._maxRetries=n.maxRetries}}}options(e,t){return this.request("OPTIONS",e,null,t||{})}get(e,t){return this.request("GET",e,null,t||{})}del(e,t){return this.request("DELETE",e,null,t||{})}post(e,t,n){return this.request("POST",e,t,n||{})}patch(e,t,n){return this.request("PATCH",e,t,n||{})}put(e,t,n){return this.request("PUT",e,t,n||{})}head(e,t){return this.request("HEAD",e,null,t||{})}sendStream(e,t,n,r){return this.request(e,t,n,r)}async getJson(e,t={}){t[u.Accept]=this._getExistingOrDefaultHeader(t,u.Accept,l.ApplicationJson);let n=await this.get(e,t);return this._processResponse(n,this.requestOptions)}async postJson(e,t,n={}){let r=JSON.stringify(t,null,2);n[u.Accept]=this._getExistingOrDefaultHeader(n,u.Accept,l.ApplicationJson);n[u.ContentType]=this._getExistingOrDefaultHeader(n,u.ContentType,l.ApplicationJson);let i=await this.post(e,r,n);return this._processResponse(i,this.requestOptions)}async putJson(e,t,n={}){let r=JSON.stringify(t,null,2);n[u.Accept]=this._getExistingOrDefaultHeader(n,u.Accept,l.ApplicationJson);n[u.ContentType]=this._getExistingOrDefaultHeader(n,u.ContentType,l.ApplicationJson);let i=await this.put(e,r,n);return this._processResponse(i,this.requestOptions)}async patchJson(e,t,n={}){let r=JSON.stringify(t,null,2);n[u.Accept]=this._getExistingOrDefaultHeader(n,u.Accept,l.ApplicationJson);n[u.ContentType]=this._getExistingOrDefaultHeader(n,u.ContentType,l.ApplicationJson);let i=await this.patch(e,r,n);return this._processResponse(i,this.requestOptions)}async request(e,t,n,i){if(this._disposed){throw new Error("Client has already been disposed.")}let s=r.parse(t);let o=this._prepareRequest(e,s,i);let c=this._allowRetries&&p.indexOf(e)!=-1?this._maxRetries+1:1;let u=0;let l;while(u<c){l=await this.requestRaw(o,n);if(l&&l.message&&l.message.statusCode===a.Unauthorized){let e;for(let t=0;t<this.handlers.length;t++){if(this.handlers[t].canHandleAuthentication(l)){e=this.handlers[t];break}}if(e){return e.handleAuthentication(this,o,n)}else{return l}}let t=this._maxRedirects;while(d.indexOf(l.message.statusCode)!=-1&&this._allowRedirects&&t>0){const c=l.message.headers["location"];if(!c){break}let a=r.parse(c);if(s.protocol=="https:"&&s.protocol!=a.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}await l.readBody();if(a.hostname!==s.hostname){for(let e in i){if(e.toLowerCase()==="authorization"){delete i[e]}}}o=this._prepareRequest(e,a,i);l=await this.requestRaw(o,n);t--}if(f.indexOf(l.message.statusCode)==-1){return l}u+=1;if(u<c){await l.readBody();await this._performExponentialBackoff(u)}}return l}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(e,t){return new Promise((n,r)=>{let i=function(e,t){if(e){r(e)}n(t)};this.requestRawWithCallback(e,t,i)})}requestRawWithCallback(e,t,n){let r;if(typeof t==="string"){e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8")}let i=false;let s=(e,t)=>{if(!i){i=true;n(e,t)}};let o=e.httpModule.request(e.options,e=>{let t=new HttpClientResponse(e);s(null,t)});o.on("socket",e=>{r=e});o.setTimeout(this._socketTimeout||3*6e4,()=>{if(r){r.end()}s(new Error("Request timeout: "+e.options.path),null)});o.on("error",function(e){s(e,null)});if(t&&typeof t==="string"){o.write(t,"utf8")}if(t&&typeof t!=="string"){t.on("close",function(){o.end()});t.pipe(o)}else{o.end()}}getAgent(e){let t=r.parse(e);return this._getAgent(t)}_prepareRequest(e,t,n){const r={};r.parsedUrl=t;const o=r.parsedUrl.protocol==="https:";r.httpModule=o?s:i;const c=o?443:80;r.options={};r.options.host=r.parsedUrl.hostname;r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):c;r.options.path=(r.parsedUrl.pathname||"")+(r.parsedUrl.search||"");r.options.method=e;r.options.headers=this._mergeHeaders(n);if(this.userAgent!=null){r.options.headers["user-agent"]=this.userAgent}r.options.agent=this._getAgent(r.parsedUrl);if(this.handlers){this.handlers.forEach(e=>{e.prepareRequest(r.options)})}return r}_mergeHeaders(e){const t=e=>Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{});if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},t(this.requestOptions.headers),t(e))}return t(e||{})}_getExistingOrDefaultHeader(e,t,n){const r=e=>Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{});let i;if(this.requestOptions&&this.requestOptions.headers){i=r(this.requestOptions.headers)[t]}return e[t]||i||n}_getAgent(e){let t;let r=o.getProxyUrl(e);let a=r&&r.hostname;if(this._keepAlive&&a){t=this._proxyAgent}if(this._keepAlive&&!a){t=this._agent}if(!!t){return t}const u=e.protocol==="https:";let l=100;if(!!this.requestOptions){l=this.requestOptions.maxSockets||i.globalAgent.maxSockets}if(a){if(!c){c=n(413)}const e={maxSockets:l,keepAlive:this._keepAlive,proxy:{proxyAuth:r.auth,host:r.hostname,port:r.port}};let i;const s=r.protocol==="https:";if(u){i=s?c.httpsOverHttps:c.httpsOverHttp}else{i=s?c.httpOverHttps:c.httpOverHttp}t=i(e);this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:l};t=u?new s.Agent(e):new i.Agent(e);this._agent=t}if(!t){t=u?s.globalAgent:i.globalAgent}if(u&&this._ignoreSslError){t.options=Object.assign(t.options||{},{rejectUnauthorized:false})}return t}_performExponentialBackoff(e){e=Math.min(h,e);const t=v*Math.pow(2,e);return new Promise(e=>setTimeout(()=>e(),t))}static dateTimeDeserializer(e,t){if(typeof t==="string"){let e=new Date(t);if(!isNaN(e.valueOf())){return e}}return t}async _processResponse(e,t){return new Promise(async(n,r)=>{const i=e.message.statusCode;const s={statusCode:i,result:null,headers:{}};if(i==a.NotFound){n(s)}let o;let c;try{c=await e.readBody();if(c&&c.length>0){if(t&&t.deserializeDates){o=JSON.parse(c,HttpClient.dateTimeDeserializer)}else{o=JSON.parse(c)}s.result=o}s.headers=e.message.headers}catch(e){}if(i>299){let e;if(o&&o.message){e=o.message}else if(c&&c.length>0){e=c}else{e="Failed request: ("+i+")"}let t=new Error(e);t["statusCode"]=i;if(s.result){t["result"]=s.result}r(t)}else{n(s)}})}}t.HttpClient=HttpClient},588:function(e,t,n){"use strict";e=n.nmd(e);var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(926));const o=n(901);function post(){return r(this,void 0,void 0,function*(){yield s.default()})}t.post=post;if(!e.parent)post().catch(o.reportError)},605:function(e){e.exports=require("http")},614:function(e){e.exports=require("events")},622:function(e){e.exports=require("path")},625:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=n(470);const o=n(1);const c=n(747);const a=n(87);const u=n(622);const l=i(n(826));const d=n(682);function createTempDirectory(){return r(this,void 0,void 0,function*(){const e=process.platform==="win32";let t=process.env["RUNNER_TEMP"]||"";if(!t){let n;if(e){n=process.env["USERPROFILE"]||"C:\\"}else{if(process.platform==="darwin"){n="/Users"}else{n="/home"}}t=u.join(n,"actions","temp")}const n=u.join(t,l.default());yield o.mkdirP(n);return n})}t.createTempDirectory=createTempDirectory;function getArchiveFileSize(e){return c.statSync(e).size}t.getArchiveFileSize=getArchiveFileSize;function isExactKeyMatch(e,t){return!!(t&&t.cacheKey&&t.cacheKey.localeCompare(e,undefined,{sensitivity:"accent"})===0)}t.isExactKeyMatch=isExactKeyMatch;function setCacheState(e){s.saveState(d.State.CacheResult,JSON.stringify(e))}t.setCacheState=setCacheState;function setCacheHitOutput(e){s.setOutput(d.Outputs.CacheHit,e.toString())}t.setCacheHitOutput=setCacheHitOutput;function setOutputAndState(e,t){setCacheHitOutput(isExactKeyMatch(e,t));t&&setCacheState(t)}t.setOutputAndState=setOutputAndState;function getCacheState(){const e=s.getState(d.State.CacheResult);s.debug(`State: ${e}`);if(e){return JSON.parse(e)}return undefined}t.getCacheState=getCacheState;function logWarning(e){const t="[warning]";s.info(`${t}${e}`)}t.logWarning=logWarning;function resolvePath(e){if(e.startsWith("~")){const t=a.homedir();if(!t){throw new Error("Unable to resolve `~` to HOME")}return u.join(t,e.slice(1))}return u.resolve(e)}t.resolvePath=resolvePath;function getSupportedEvents(){return[d.Events.Push,d.Events.PullRequest]}t.getSupportedEvents=getSupportedEvents;function isValidEvent(){const e=process.env[d.Events.Key]||"";return getSupportedEvents().includes(e)}t.isValidEvent=isValidEvent},631:function(e){e.exports=require("net")},669:function(e){e.exports=require("util")},672:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i;Object.defineProperty(t,"__esModule",{value:true});const s=n(357);const o=n(747);const c=n(622);i=o.promises,t.chmod=i.chmod,t.copyFile=i.copyFile,t.lstat=i.lstat,t.mkdir=i.mkdir,t.readdir=i.readdir,t.readlink=i.readlink,t.rename=i.rename,t.rmdir=i.rmdir,t.stat=i.stat,t.symlink=i.symlink,t.unlink=i.unlink;t.IS_WINDOWS=process.platform==="win32";function exists(e){return r(this,void 0,void 0,function*(){try{yield t.stat(e)}catch(e){if(e.code==="ENOENT"){return false}throw e}return true})}t.exists=exists;function isDirectory(e,n=false){return r(this,void 0,void 0,function*(){const r=n?yield t.stat(e):yield t.lstat(e);return r.isDirectory()})}t.isDirectory=isDirectory;function isRooted(e){e=normalizeSeparators(e);if(!e){throw new Error('isRooted() parameter "p" cannot be empty')}if(t.IS_WINDOWS){return e.startsWith("\\")||/^[A-Z]:/i.test(e)}return e.startsWith("/")}t.isRooted=isRooted;function mkdirP(e,n=1e3,i=1){return r(this,void 0,void 0,function*(){s.ok(e,"a path argument must be provided");e=c.resolve(e);if(i>=n)return t.mkdir(e);try{yield t.mkdir(e);return}catch(r){switch(r.code){case"ENOENT":{yield mkdirP(c.dirname(e),n,i+1);yield t.mkdir(e);return}default:{let n;try{n=yield t.stat(e)}catch(e){throw r}if(!n.isDirectory())throw r}}}})}t.mkdirP=mkdirP;function tryGetExecutablePath(e,n){return r(this,void 0,void 0,function*(){let r=undefined;try{r=yield t.stat(e)}catch(t){if(t.code!=="ENOENT"){console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}}if(r&&r.isFile()){if(t.IS_WINDOWS){const t=c.extname(e).toUpperCase();if(n.some(e=>e.toUpperCase()===t)){return e}}else{if(isUnixExecutable(r)){return e}}}const i=e;for(const s of n){e=i+s;r=undefined;try{r=yield t.stat(e)}catch(t){if(t.code!=="ENOENT"){console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}}if(r&&r.isFile()){if(t.IS_WINDOWS){try{const n=c.dirname(e);const r=c.basename(e).toUpperCase();for(const i of yield t.readdir(n)){if(r===i.toUpperCase()){e=c.join(n,i);break}}}catch(t){console.log(`Unexpected error attempting to determine the actual case of the file '${e}': ${t}`)}return e}else{if(isUnixExecutable(r)){return e}}}}return""})}t.tryGetExecutablePath=tryGetExecutablePath;function normalizeSeparators(e){e=e||"";if(t.IS_WINDOWS){e=e.replace(/\//g,"\\");return e.replace(/\\\\+/g,"\\")}return e.replace(/\/\/+/g,"/")}function isUnixExecutable(e){return(e.mode&1)>0||(e.mode&8)>0&&e.gid===process.getgid()||(e.mode&64)>0&&e.uid===process.getuid()}},682:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e["Key"]="key";e["Path"]="path";e["RestoreKeys"]="restore-keys"})(n=t.Inputs||(t.Inputs={}));var r;(function(e){e["CacheHit"]="cache-hit"})(r=t.Outputs||(t.Outputs={}));var i;(function(e){e["CacheKey"]="CACHE_KEY";e["CacheResult"]="CACHE_RESULT"})(i=t.State||(t.State={}));var s;(function(e){e["Key"]="GITHUB_EVENT_NAME";e["Push"]="push";e["PullRequest"]="pull_request"})(s=t.Events||(t.Events={}))},722:function(e){var t=[];for(var n=0;n<256;++n){t[n]=(n+256).toString(16).substr(1)}function bytesToUuid(e,n){var r=n||0;var i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}e.exports=bytesToUuid},747:function(e){e.exports=require("fs")},769:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=n(986);const s=n(1);const o=n(747);function getTarPath(){return r(this,void 0,void 0,function*(){const e=process.platform==="win32";if(e){const e=`${process.env["windir"]}\\System32\\tar.exe`;if(o.existsSync(e)){return e}}return yield s.which("tar",true)})}function execTar(e){var t,n;return r(this,void 0,void 0,function*(){try{yield i.exec(`"${yield getTarPath()}"`,e)}catch(e){const r=process.platform==="win32";if(r){throw new Error(`Tar failed with error: ${(t=e)===null||t===void 0?void 0:t.message}. Ensure BSD tar is installed and on the PATH.`)}throw new Error(`Tar failed with error: ${(n=e)===null||n===void 0?void 0:n.message}`)}})}function extractTar(e,t){return r(this,void 0,void 0,function*(){yield s.mkdirP(t);const n=["-xz","-f",e,"-C",t];yield execTar(n)})}t.extractTar=extractTar;function createTar(e,t){return r(this,void 0,void 0,function*(){const n=["-cz","-f",e,"-C",t,"."];yield execTar(n)})}t.createTar=createTar},793:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=n(470);const s=n(747);const o=n(226);const c=n(539);const a=n(625);function isSuccessStatusCode(e){if(!e){return false}return e>=200&&e<300}function isRetryableStatusCode(e){if(!e){return false}const t=[c.HttpCodes.BadGateway,c.HttpCodes.ServiceUnavailable,c.HttpCodes.GatewayTimeout];return t.includes(e)}function getCacheApiUrl(e){const t=(process.env["ACTIONS_CACHE_URL"]||process.env["ACTIONS_RUNTIME_URL"]||"").replace("pipelines","artifactcache");if(!t){throw new Error("Cache Service Url not found, unable to restore cache.")}const n=`${t}_apis/artifactcache/${e}`;i.debug(`Resource Url: ${n}`);return n}function createAcceptHeader(e,t){return`${e};api-version=${t}`}function getRequestOptions(){const e={headers:{Accept:createAcceptHeader("application/json","6.0-preview.1")}};return e}function createHttpClient(){const e=process.env["ACTIONS_RUNTIME_TOKEN"]||"";const t=new o.BearerCredentialHandler(e);return new c.HttpClient("actions/cache",[t],getRequestOptions())}function getCacheEntry(e){var t;return r(this,void 0,void 0,function*(){const n=createHttpClient();const r=`cache?keys=${encodeURIComponent(e.join(","))}`;const s=yield n.getJson(getCacheApiUrl(r));if(s.statusCode===204){return null}if(!isSuccessStatusCode(s.statusCode)){throw new Error(`Cache service responded with ${s.statusCode}`)}const o=s.result;const c=(t=o)===null||t===void 0?void 0:t.archiveLocation;if(!c){throw new Error("Cache not found.")}i.setSecret(c);i.debug(`Cache Result:`);i.debug(JSON.stringify(o));return o})}t.getCacheEntry=getCacheEntry;function pipeResponseToStream(e,t){return r(this,void 0,void 0,function*(){return new Promise(n=>{e.message.pipe(t).on("close",()=>{n()})})})}function downloadCache(e,t){return r(this,void 0,void 0,function*(){const n=s.createWriteStream(t);const r=new c.HttpClient("actions/cache");const i=yield r.get(e);yield pipeResponseToStream(i,n)})}t.downloadCache=downloadCache;function reserveCache(e){var t,n,i;return r(this,void 0,void 0,function*(){const r=createHttpClient();const s={key:e};const o=yield r.postJson(getCacheApiUrl("caches"),s);return i=(n=(t=o)===null||t===void 0?void 0:t.result)===null||n===void 0?void 0:n.cacheId,i!==null&&i!==void 0?i:-1})}t.reserveCache=reserveCache;function getContentRange(e,t){return`bytes ${e}-${t}/*`}function uploadChunk(e,t,n,s,o){return r(this,void 0,void 0,function*(){i.debug(`Uploading chunk of size ${o-s+1} bytes at offset ${s} with content range: ${getContentRange(s,o)}`);const c={"Content-Type":"application/octet-stream","Content-Range":getContentRange(s,o)};const a=()=>r(this,void 0,void 0,function*(){return yield e.sendStream("PATCH",t,n,c)});const u=yield a();if(isSuccessStatusCode(u.message.statusCode)){return}if(isRetryableStatusCode(u.message.statusCode)){i.debug(`Received ${u.message.statusCode}, retrying chunk at offset ${s}.`);const e=yield a();if(isSuccessStatusCode(e.message.statusCode)){return}}throw new Error(`Cache service responded with ${u.message.statusCode} during chunk upload.`)})}function parseEnvNumber(e){const t=Number(process.env[e]);if(Number.isNaN(t)||t<0){return undefined}return t}function uploadFile(e,t,n){var o,c;return r(this,void 0,void 0,function*(){const a=s.statSync(n).size;const u=getCacheApiUrl(`caches/${t.toString()}`);const l=s.openSync(n,"r");const d=(o=parseEnvNumber("CACHE_UPLOAD_CONCURRENCY"),o!==null&&o!==void 0?o:4);const f=(c=parseEnvNumber("CACHE_UPLOAD_CHUNK_SIZE"),c!==null&&c!==void 0?c:32*1024*1024);i.debug(`Concurrency: ${d} and Chunk Size: ${f}`);const p=[...new Array(d).keys()];i.debug("Awaiting all uploads");let h=0;try{yield Promise.all(p.map(()=>r(this,void 0,void 0,function*(){while(h<a){const t=Math.min(a-h,f);const r=h;const i=h+t-1;h+=f;const o=s.createReadStream(n,{fd:l,start:r,end:i,autoClose:false});yield uploadChunk(e,u,o,r,i)}})))}finally{s.closeSync(l)}return})}function commitCache(e,t,n){return r(this,void 0,void 0,function*(){const r={size:n};return yield e.postJson(getCacheApiUrl(`caches/${t.toString()}`),r)})}function saveCache(e,t){return r(this,void 0,void 0,function*(){const n=createHttpClient();i.debug("Upload cache");yield uploadFile(n,e,t);i.debug("Committing cache");const r=a.getArchiveFileSize(t);const s=yield commitCache(n,e,r);if(!isSuccessStatusCode(s.statusCode)){throw new Error(`Cache service responded with ${s.statusCode} during commit cache.`)}i.info("Cache saved successfully")})}t.saveCache=saveCache},826:function(e,t,n){var r=n(139);var i=n(722);function v4(e,t,n){var s=t&&n||0;if(typeof e=="string"){t=e==="binary"?new Array(16):null;e=null}e=e||{};var o=e.random||(e.rng||r)();o[6]=o[6]&15|64;o[8]=o[8]&63|128;if(t){for(var c=0;c<16;++c){t[s+c]=o[c]}}return t||i(o)}e.exports=v4},835:function(e){e.exports=require("url")},901:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function reportError(e){process.exitCode=1;console.log("Error in run!");console.log(e)}t.reportError=reportError},926:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=n(470);const s=n(622);const o=n(793);const c=n(682);const a=n(769);const u=n(625);function save(){return r(this,void 0,void 0,function*(){try{if(!u.isValidEvent()){u.logWarning(`Event Validation Error: The event type ${process.env[c.Events.Key]} is not supported. Only ${u.getSupportedEvents().join(", ")} events are supported at this time.`);return}const e=u.getCacheState();const t=i.getState(c.State.CacheKey);if(!t){u.logWarning(`Error retrieving key from state.`);return}if(u.isExactKeyMatch(t,e)){i.info(`Cache hit occurred on the primary key ${t}, not saving cache.`);return}i.debug("Reserving Cache");const n=yield o.reserveCache(t);if(n===-1){i.info(`Unable to reserve cache with key ${t}, another job may be creating this cache.`);return}i.debug(`Cache ID: ${n}`);const r=u.resolvePath(i.getInput(c.Inputs.Path,{required:true}));i.debug(`Cache Path: ${r}`);const l=s.join(yield u.createTempDirectory(),"cache.tgz");i.debug(`Archive Path: ${l}`);yield a.createTar(l,r);const d=5*1024*1024*1024;const f=u.getArchiveFileSize(l);i.debug(`File Size: ${f}`);if(f>d){u.logWarning(`Cache size of ~${Math.round(f/(1024*1024))} MB (${f} B) is over the 5GB limit, not saving cache.`);return}i.debug(`Saving Cache (ID: ${n})`);yield o.saveCache(n,l)}catch(e){u.logWarning(e.message)}})}t.default=save},950:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(835);function getProxyUrl(e){let t=e.protocol==="https:";let n;if(checkBypass(e)){return n}let i;if(t){i=process.env["https_proxy"]||process.env["HTTPS_PROXY"]}else{i=process.env["http_proxy"]||process.env["HTTP_PROXY"]}if(i){n=r.parse(i)}return n}t.getProxyUrl=getProxyUrl;function checkBypass(e){if(!e.hostname){return false}let t=process.env["no_proxy"]||process.env["NO_PROXY"]||"";if(!t){return false}let n;if(e.port){n=Number(e.port)}else if(e.protocol==="http:"){n=80}else if(e.protocol==="https:"){n=443}let r=[e.hostname.toUpperCase()];if(typeof n==="number"){r.push(`${r[0]}:${n}`)}for(let e of t.split(",").map(e=>e.trim().toUpperCase()).filter(e=>e)){if(r.some(t=>t===e)){return true}}return false}t.checkBypass=checkBypass},986:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=n(9);function exec(e,t,n){return r(this,void 0,void 0,function*(){const r=i.argStringToArray(e);if(r.length===0){throw new Error(`Parameter 'commandLine' cannot be null or empty.`)}const s=r[0];t=r.slice(1).concat(t||[]);const o=new i.ToolRunner(s,t,n);return o.exec()})}t.exec=exec}},function(e){"use strict";!function(){e.nmd=function(e){e.paths=[];if(!e.children)e.children=[];Object.defineProperty(e,"loaded",{enumerable:true,get:function(){return e.l}});Object.defineProperty(e,"id",{enumerable:true,get:function(){return e.i}});return e}}()});
//# sourceMappingURL=index.js.map